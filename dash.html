<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SEOTIZE Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/turnstile@0/turnstile.min.js" async defer></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<style>
:root{--primary:#6366f1;--primary-dark:#4f46e5;--primary-light:#818cf8;--secondary:#10b981;--secondary-dark:#059669;--accent:#f59e0b;--error:#ef4444;--warning:#f59e0b;--success:#10b981;--info:#3b82f6;--danger:#e63946;--gradient-primary:linear-gradient(135deg,#667eea 0%,#764ba2 100%);--gradient-secondary:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);--gradient-accent:linear-gradient(135deg,#fa709a 0%,#fee140 100%);--radius-sm:8px;--radius:12px;--radius-lg:16px;--radius-xl:24px;--shadow-sm:0 1px 2px 0 rgba(0,0,0,0.05);--shadow:0 4px 6px -1px rgba(0,0,0,0.1);--shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1);--shadow-xl:0 20px 25px -5px rgba(0,0,0,0.1);--transition:all 0.3s cubic-bezier(0.4,0,0.2,1)}
[data-theme="light"]{--bg:#f8f9fa;--bg-secondary:#ffffff;--bg-tertiary:#e9ecef;--sidebar:#ffffff;--card:#ffffff;--card-hover:#f8f9fa;--text:#212529;--text-secondary:#6c757d;--text-tertiary:#adb5bd;--border:#dee2e6;--input-bg:#ffffff;--overlay:rgba(255,255,255,0.95);--glass:rgba(255,255,255,0.7);--glass-border:rgba(0,0,0,0.1)}
[data-theme="dark"]{--bg:#0a0a0a;--bg-secondary:#1a1a1a;--bg-tertiary:#2a2a2a;--sidebar:#141414;--card:#1f1f1f;--card-hover:#2a2a2a;--text:#ffffff;--text-secondary:#a0a0a0;--text-tertiary:#6b6b6b;--border:rgba(255,255,255,0.1);--input-bg:#1a1a1a;--overlay:rgba(0,0,0,0.95);--glass:rgba(255,255,255,0.05);--glass-border:rgba(255,255,255,0.1)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;transition:var(--transition);line-height:1.6;overflow-x:hidden}
.dashboard-layout{display:flex;min-height:100vh}
.sidebar{width:280px;background:var(--sidebar);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:var(--transition)}
.sidebar-header{padding:1.5rem;border-bottom:1px solid var(--border)}
.logo,.logox{display:flex;align-items:center;gap:0.75rem;font-size:1.5rem;font-weight:800;color:var(--primary);text-decoration:none}
.sidebar-nav{flex:1;padding:1rem;overflow-y:auto}
.nav-section{margin-bottom:1.5rem}
.nav-section-title{font-size:0.75rem;font-weight:600;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem;padding:0 0.75rem}
.nav-item{display:flex;align-items:center;gap:0.75rem;padding:0.75rem;border-radius:var(--radius);color:var(--text-secondary);text-decoration:none;transition:var(--transition);cursor:pointer;margin-bottom:0.25rem}
.nav-item:hover{background:var(--card);color:var(--text)}
.nav-item.active{background:var(--primary);color:white}
.nav-item i{font-size:1.25rem;width:1.5rem;text-align:center}
.main-content{flex:1;display:flex;flex-direction:column;overflow:hidden}
.header{background:var(--bg-secondary);border-bottom:1px solid var(--border);padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center}
.header-left{display:flex;align-items:center;gap:1rem}
.search-bar{position:relative;width:300px}
.search-bar input{width:100%;padding:0.625rem 1rem 0.625rem 2.5rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--input-bg);color:var(--text);font-size:0.875rem;transition:var(--transition)}
.search-bar input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.1)}
.search-bar i{position:absolute;left:0.875rem;top:50%;transform:translateY(-50%);color:var(--text-tertiary)}
.header-right{display:flex;align-items:center;gap:1rem}
.theme-toggle{padding:0.5rem;border-radius:var(--radius);background:transparent;border:none;color:var(--text);cursor:pointer;font-size:1.25rem;transition:var(--transition)}
.theme-toggle:hover{background:var(--card)}
.user-menu{display:flex;align-items:center;gap:0.75rem;padding:0.5rem 1rem;border-radius:var(--radius);background:var(--card);cursor:pointer;transition:var(--transition)}
.user-menu:hover{background:var(--card-hover)}
.user-avatar{width:32px;height:32px;border-radius:50%;background:var(--gradient-primary);display:flex;align-items:center;justify-content:center;color:white;font-weight:600}
.content{flex:1;padding:1.5rem;overflow-y:auto}
.card{background:var(--card);border-radius:var(--radius-lg);border:1px solid var(--border);transition:var(--transition)}
.card-header{padding:1.25rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.card-title{font-size:1.125rem;font-weight:600;color:var(--text)}
.card-body{padding:1.25rem}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}
.stat-card{background:var(--card);border-radius:var(--radius);padding:1.25rem;border:1px solid var(--border);display:flex;align-items:center;gap:1rem;transition:var(--transition);position:relative;overflow:hidden}
.stat-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
.stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--gradient-primary)}
.stat-icon{width:40px;height:40px;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;font-size:1.25rem;flex-shrink:0}
.stat-icon.primary{background:rgba(99,102,241,0.1);color:var(--primary)}
.stat-icon.success{background:rgba(16,185,129,0.1);color:var(--success)}
.stat-icon.warning{background:rgba(245,158,11,0.1);color:var(--warning)}
.stat-icon.error{background:rgba(239,68,68,0.1);color:var(--error)}
.stat-content{flex:1;min-width:0}
.stat-value{font-size:1.5rem;font-weight:700;color:var(--text);margin-bottom:0.25rem}
.stat-label{font-size:0.875rem;color:var(--text-secondary)}
.btn{padding:0.625rem 1.25rem;border-radius:var(--radius);font-weight:500;font-size:0.875rem;border:none;cursor:pointer;transition:var(--transition);display:inline-flex;align-items:center;gap:0.5rem;text-decoration:none}
.btn-primary{background:var(--primary);color:white}
.btn-primary:hover{background:var(--primary-dark);transform:translateY(-1px);box-shadow:var(--shadow)}
.btn-secondary{background:var(--bg-tertiary);color:var(--text)}
.btn-secondary:hover{background:var(--card)}
.btn-danger{background:var(--error);color:white}
.btn-danger:hover{background:#dc2626}
.btn-sm{padding:0.375rem 0.75rem;font-size:0.8125rem}
.form-group{margin-bottom:1.5rem}
.form-label{display:block;margin-bottom:0.5rem;font-weight:500;color:var(--text)}
.form-input,.form-select,.form-textarea{width:100%;padding:0.625rem 1rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--input-bg);color:var(--text);font-size:0.875rem;transition:var(--transition)}
.form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.1)}
.form-textarea{resize:vertical;min-height:100px}
.table-container{overflow-x:auto;border-radius:var(--radius);border:1px solid var(--border)}
table{width:100%;border-collapse:collapse}
th{background:var(--bg-tertiary);padding:0.75rem 1rem;text-align:left;font-weight:600;color:var(--text);border-bottom:1px solid var(--border)}
td{padding:0.75rem 1rem;border-bottom:1px solid var(--border);color:var(--text-secondary)}
tr:hover{background:var(--card-hover)}
.pagination{display:flex;justify-content:center;align-items:center;gap:0.5rem;margin-top:2rem;padding:1rem;background:var(--card);border-radius:var(--radius);border:1px solid var(--border)}
.pagination-btn{padding:0.5rem 0.75rem;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-secondary);color:var(--text);cursor:pointer;transition:var(--transition);font-size:0.875rem}
.pagination-btn:hover:not(:disabled){background:var(--primary);color:white;border-color:var(--primary)}
.pagination-btn:disabled{opacity:0.5;cursor:not-allowed}
.pagination-btn.active{background:var(--primary);color:white;border-color:var(--primary)}
.pagination-info{margin:0 1rem;color:var(--text-secondary);font-size:0.875rem}
.modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);z-index:1000;animation:fadeIn 0.3s}
.modal-overlay.active{display:flex;align-items:center;justify-content:center}
.modal{background:var(--card);border-radius:var(--radius-xl);max-width:90vw;width:900px;max-height:90vh;overflow:hidden;animation:slideUp 0.3s}
.modal-header{padding:1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.modal-title{font-size:1.25rem;font-weight:600;color:var(--text)}
.modal-close{background:transparent;border:none;color:var(--text-secondary);font-size:1.5rem;cursor:pointer;padding:0.25rem;transition:var(--transition)}
.modal-close:hover{color:var(--text)}
.modal-body{padding:1.5rem;max-height:calc(90vh - 140px);overflow-y:auto}
.toast{position:fixed;bottom:2rem;right:2rem;padding:1rem 1.5rem;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-xl);display:flex;align-items:center;gap:0.75rem;animation:slideInRight 0.3s;z-index:2000}
.toast.success{border-left:4px solid var(--success)}
.toast.error{border-left:4px solid var(--error)}
.toast.warning{border-left:4px solid var(--warning)}
.toast.info{border-left:4px solid var(--info)}
.chart-container{position:relative;height:280px!important;width:100%;overflow:hidden}
.chart-container canvas{width:100%!important;height:100%!important;max-width:100%;max-height:100%}
.map-container{height:280px!important;width:100%;border-radius:var(--radius);overflow:hidden;border:1px solid var(--border)}
.leaflet-container{background:var(--bg-tertiary)!important}
.leaflet-tile-pane{filter:var(--map-filter,none)}
[data-theme="dark"] .leaflet-tile-pane{--map-filter:hue-rotate(180deg) invert(100%) brightness(70%) contrast(120%)}
.task-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1.5rem}
.task-card{background:var(--card);border-radius:var(--radius-lg);border:1px solid var(--border);padding:1.25rem;transition:var(--transition);cursor:pointer}
.task-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
.task-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem}
.task-url{font-weight:600;color:var(--primary);text-decoration:none;word-break:break-all;font-size:12px}
.task-status{padding:0.25rem 0.75rem;border-radius:var(--radius-sm);font-size:0.75rem;font-weight:600}
.task-status.active{background:rgba(16,185,129,0.1);color:var(--success)}
.task-status.paused{background:rgba(245,158,11,0.1);color:var(--warning)}
.task-status.completed{background:rgba(99,102,241,0.1);color:var(--primary)}
.task-status.unverified{background:rgba(239,68,68,0.1);color:var(--error)}
.task-card.unverified{opacity:0.7;border:1px dashed var(--border)}
.task-card.unverified .task-url{color:var(--text-secondary)}
.task-stats{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin:1rem 0}
.task-stat{display:flex;flex-direction:column}
.task-stat-label{font-size:0.75rem;color:var(--text-tertiary);margin-bottom:0.25rem}
.task-stat-value{font-size:1.125rem;font-weight:600;color:var(--text)}
.task-progress{margin:1rem 0}
.progress-bar{height:6px;background:var(--bg-tertiary);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;background:var(--gradient-primary);transition:width 0.3s ease}
.task-actions{display:flex;gap:0.5rem;margin-top:1rem}
.website-preview{width:100%;height:450px;border:2px solid var(--border);border-radius:var(--radius);background:#fff;position:relative;overflow:hidden;margin-bottom:1rem}
.website-preview iframe{width:100%;height:100%;border:none;background:#fff}
.preview-controls{position:absolute;top:10px;right:10px;display:flex;gap:5px;background:rgba(0,0,0,0.8);padding:8px;border-radius:var(--radius);z-index:10}
.preview-btn{padding:4px 8px;background:var(--primary);color:white;border:none;border-radius:4px;font-size:0.75rem;cursor:pointer;transition:var(--transition)}
.preview-btn:hover{background:var(--primary-dark)}
.xpath-marker{position:absolute;width:28px;height:28px;background:var(--primary);color:white;border:3px solid white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.875rem;cursor:pointer;box-shadow:var(--shadow-lg);animation:pulse 2s infinite;transform:translate(-50%,-50%);z-index:15}
.media-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}
.media-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;transition:var(--transition)}
.media-card:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
.media-preview{height:140px;background:var(--bg-tertiary);display:flex;align-items:center;justify-content:center;overflow:hidden}
.media-preview img{width:100%;height:100%;object-fit:cover}
.media-info{padding:1rem}
.media-filename{font-weight:600;margin-bottom:0.5rem;word-break:break-all;font-size:0.875rem}
.media-stats{display:flex;justify-content:space-between;align-items:center;font-size:0.75rem;color:var(--text-secondary);margin-bottom:0.75rem}
.empty-state{text-align:center;padding:3rem}
.empty-state-icon{font-size:4rem;color:var(--text-tertiary);margin-bottom:1rem}
.empty-state-title{font-size:1.5rem;font-weight:600;color:var(--text);margin-bottom:0.5rem}
.empty-state-description{color:var(--text-secondary);margin-bottom:1.5rem}
.badge{display:inline-block;padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-size:0.75rem;font-weight:600}
.badge-primary{background:rgba(99,102,241,0.1);color:var(--primary)}
.badge-success{background:rgba(16,185,129,0.1);color:var(--success)}
.badge-warning{background:rgba(245,158,11,0.1);color:var(--warning)}
.badge-danger{background:rgba(239,68,68,0.1);color:var(--error)}
.spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}
.seo-task-creator{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.75);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:9998;display:none;animation:fadeIn 0.3s ease}
.seo-task-creator.active{display:flex;align-items:center;justify-content:center}
.task-creator-container{background:var(--bg-secondary);border-radius:1.5rem;width:95vw;max-width:1200px;max-height:90vh;overflow:hidden;display:flex;box-shadow:0 30px 60px -15px rgba(0,0,0,0.3);animation:slideUpDesktop 0.4s cubic-bezier(0.34,1.56,0.64,1);position:relative}
@keyframes slideUpDesktop{from{transform:translateY(30px) scale(0.95);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}
.task-creator-sidebar{width:280px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-tertiary) 100%);padding:2rem;border-right:1px solid var(--border);display:flex;flex-direction:column;gap:1.5rem}
.task-creator-main{flex:1;display:flex;flex-direction:column;position:relative}
.task-creator-header{padding:2rem;border-bottom:1px solid var(--border);background:var(--bg-secondary);position:relative}
.task-creator-title{font-size:1.5rem;font-weight:700;margin-bottom:0.5rem;color:var(--text)}
.task-creator-subtitle{color:var(--text-secondary);font-size:0.875rem}
.task-creator-close{position:absolute;top:1.5rem;right:1.5rem;width:2.5rem;height:2.5rem;border-radius:50%;background:linear-gradient(135deg,rgba(255,255,255,0.95) 0%,rgba(249,250,251,0.95) 100%);border:2px solid rgba(229,231,235,1);color:#6b7280;font-size:1.25rem;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);display:flex;align-items:center;justify-content:center;z-index:1010;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}
.task-creator-close:hover{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);color:white;transform:rotate(90deg) scale(1.1);border-color:transparent;box-shadow:0 8px 20px rgba(239,68,68,0.4)}
.task-creator-close:active{transform:rotate(90deg) scale(1);box-shadow:0 4px 12px rgba(239,68,68,0.3)}
.task-creator-body{flex:1;padding:2rem;overflow-y:auto}
.progress-steps{margin-bottom:2rem}
.progress-step{display:flex;align-items:center;margin-bottom:1.5rem;cursor:pointer;transition:var(--transition)}
.step-indicator{width:3rem;height:3rem;border-radius:50%;background:var(--bg-tertiary);border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-weight:600;margin-right:1rem;transition:all 0.3s}
.progress-step.completed .step-indicator{background:var(--success);border-color:var(--success);color:white}
.progress-step.active .step-indicator{background:var(--primary);border-color:var(--primary);color:white;box-shadow:0 0 0 4px rgba(99,102,241,0.1)}
.step-info{flex:1}
.step-title{font-weight:600;margin-bottom:0.25rem;color:var(--text-secondary)}
.progress-step.active .step-title,.progress-step.completed .step-title{color:var(--text)}
.step-description{font-size:0.75rem;color:var(--text-secondary)}
.step-content{display:none;animation:fadeIn 0.3s ease}
.step-content.active{display:block}
.step-navigation{display:flex;justify-content:space-between;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--border)}
.pending-task-alert{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:1rem;padding:2rem;margin-bottom:2rem;color:white;display:none}
.pending-task-alert.show{display:block;animation:slideDown 0.3s ease}
.pending-task-header{display:flex;align-items:center;margin-bottom:1rem}
.pending-task-icon{width:3rem;height:3rem;background:rgba(255,255,255,0.2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-right:1rem}
.pending-task-info{flex:1}
.pending-task-title{font-size:1.125rem;font-weight:600;margin-bottom:0.25rem}
.pending-task-details{background:rgba(0,0,0,0.2);border-radius:0.5rem;padding:1rem;margin-bottom:1rem}
.pending-task-actions{display:flex;gap:1rem}
.pending-task-actions .btn{flex:1}
.priority-options{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem}
.priority-option{border:2px solid var(--border);border-radius:1rem;padding:1.25rem 1rem;cursor:pointer;transition:all 0.3s;position:relative;overflow:hidden;text-align:center;min-height:180px;display:flex;flex-direction:column;justify-content:space-between}
.priority-option::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:var(--border);transition:all 0.3s}
.priority-option:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(0,0,0,0.1);border-color:var(--primary)}
.priority-option.selected{border-color:var(--primary);background:linear-gradient(135deg,rgba(99,102,241,0.05) 0%,rgba(99,102,241,0.1) 100%)}
.priority-option.selected::before{background:var(--primary)}
.priority-badge{display:inline-flex;padding:0.25rem 0.75rem;background:var(--bg-tertiary);border-radius:999px;font-size:0.7rem;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:0.75rem;align-self:center}
.priority-option[data-priority="basic"] .priority-badge{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}
.priority-option[data-priority="standard"] .priority-badge{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:white}
.priority-option[data-priority="premium"] .priority-badge{background:linear-gradient(135deg,#fa709a 0%,#fee140 100%);color:white}
.priority-title{font-weight:600;margin-bottom:0.5rem;font-size:0.95rem}
.priority-price{font-size:1.35rem;font-weight:700;color:var(--primary);margin-bottom:0.5rem}
.priority-price small{font-size:0.875rem;color:var(--text-secondary);font-weight:400}
.priority-locations{font-size:0.875rem;color:var(--text-secondary);margin-top:0.25rem}
.keyword-suggestions{display:flex;flex-wrap:wrap;gap:0.75rem;margin-bottom:1.5rem}
.keyword-suggestion{padding:0.5rem 1rem;background:var(--bg-tertiary);border:2px solid transparent;border-radius:999px;font-size:0.875rem;cursor:pointer;transition:all 0.2s;display:inline-flex;align-items:center;gap:0.5rem}
.keyword-suggestion:hover{background:var(--primary);color:white;transform:scale(1.05)}
.keyword-suggestion.selected{background:var(--primary);color:white;border-color:var(--primary)}
.selected-keywords{background:var(--bg-tertiary);border-radius:0.75rem;padding:1rem;margin-bottom:1.5rem}
.keyword-tags{display:flex;flex-wrap:wrap;gap:0.5rem}
.keyword-tag{display:inline-flex;align-items:center;padding:0.5rem 0.75rem;background:var(--primary);color:white;border-radius:0.5rem;font-size:0.875rem;animation:fadeIn 0.2s}
.keyword-tag-text{margin-right:0.5rem}
.keyword-tag-remove{width:1.25rem;height:1.25rem;background:rgba(255,255,255,0.2);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s;color:white;font-size:0.75rem}
.keyword-tag-remove:hover{background:var(--error);transform:scale(1.2)}
.payment-options{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:2rem}
.payment-card{border:2px solid var(--border);border-radius:1rem;padding:1.5rem;cursor:pointer;transition:all 0.3s;position:relative}
.payment-card:hover{border-color:var(--primary);transform:translateY(-2px)}
.payment-card.selected{border-color:var(--primary);background:rgba(99,102,241,0.05)}
.payment-card.selected::after{content:'✓';position:absolute;top:1rem;right:1rem;width:1.5rem;height:1.5rem;background:var(--primary);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.75rem}
.payment-icon{width:3rem;height:3rem;background:var(--bg-tertiary);border-radius:0.75rem;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:1rem;color:var(--primary)}
.payment-title{font-weight:600;margin-bottom:0.5rem;color:var(--text)}
.payment-description{font-size:0.875rem;color:var(--text-secondary)}
.payment-type-toggle{background:linear-gradient(135deg,var(--bg-tertiary) 0%,rgba(99,102,241,0.1) 100%);border-radius:1rem;padding:0.375rem;display:flex;margin-bottom:2rem;box-shadow:0 4px 12px rgba(0,0,0,0.05);border:1px solid var(--border)}
.payment-type-option{flex:1;padding:0.875rem 1rem;border:none;background:transparent;border-radius:0.75rem;font-weight:600;color:var(--text-secondary);cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:0.5rem}
.payment-type-option:hover{transform:translateY(-1px)}
.payment-type-option.active{background:linear-gradient(135deg,var(--primary) 0%,#764ba2 100%);color:white;box-shadow:0 4px 12px rgba(99,102,241,0.3);transform:scale(1.02)}
.payment-type-option i{font-size:1.125rem}
.budget-calculator{background:var(--bg-tertiary);border-radius:1rem;padding:1.5rem;margin-bottom:2rem}
.budget-input-group{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}
.budget-field{position:relative}
.budget-field label{font-size:0.875rem;font-weight:600;color:var(--text-secondary);margin-bottom:0.5rem;display:block}
.budget-field input{width:100%;padding:0.75rem 1rem;padding-left:2.5rem;border:2px solid var(--border);border-radius:0.5rem;font-size:1.25rem;font-weight:600;background:var(--card);color:var(--text)}
.budget-field .currency-symbol{position:absolute;left:1rem;bottom:0.875rem;color:var(--text-secondary);font-size:1.25rem;font-weight:600}
.budget-summary{background:var(--card);border-radius:0.75rem;padding:1rem;display:grid;grid-template-columns:repeat(3,1fr);gap:0.75rem;margin-top:1rem}
.budget-summary-period{font-size:0.65rem;color:var(--text-secondary);margin-top:0.25rem;opacity:0.8}
.budget-summary-item{text-align:center;padding:0.75rem;background:var(--bg-primary);border-radius:0.5rem;border:1px solid var(--border)}
.budget-summary-label{font-size:0.75rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:0.25rem}
.budget-summary-value{font-size:1.25rem;font-weight:700;color:var(--text)}
.billing-cycle-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:1rem;margin-bottom:1.5rem}
.billing-option{position:relative;border:1.5px solid var(--border);border-radius:1.25rem;padding:1.5rem 1.25rem 1.25rem;cursor:pointer;transition:all 0.3s ease;background:var(--card);display:flex;flex-direction:column;gap:0.75rem;text-align:left;min-height:170px;box-shadow:0 12px 30px rgba(15,23,42,0.05)}
.billing-option-top{display:flex;align-items:center;gap:0.85rem;width:100%}
.billing-icon{width:3rem;height:3rem;border-radius:0.85rem;background:rgba(99,102,241,0.12);color:var(--primary);display:flex;align-items:center;justify-content:center;font-size:1.35rem;flex-shrink:0;box-shadow:inset 0 0 0 1px rgba(99,102,241,0.15)}
.billing-option-header{display:flex;flex-direction:column;align-items:flex-start;gap:0.15rem;margin-bottom:0}
.billing-period{font-size:1.15rem;font-weight:700;color:var(--text)}
.billing-frequency{font-size:0.85rem;color:var(--text-secondary)}
.billing-save{display:inline-block;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:0.25rem 0.75rem;border-radius:0.5rem;font-size:0.75rem;font-weight:600;margin-left:auto}
.billing-price{font-size:0.95rem;color:var(--text);font-weight:600}
.billing-note{font-size:0.85rem;color:var(--text-secondary)}
.billing-option:hover{border-color:var(--primary);transform:translateY(-4px);box-shadow:0 20px 35px rgba(99,102,241,0.2)}
.billing-option.selected{border-color:transparent;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);box-shadow:0 30px 45px rgba(99,102,241,0.35);color:white}
.billing-option.selected .billing-icon{background:rgba(255,255,255,0.18);color:white;box-shadow:none}
.billing-option.selected .billing-period,.billing-option.selected .billing-frequency,.billing-option.selected .billing-price,.billing-option.selected .billing-note{color:rgba(255,255,255,0.95)}
.billing-option.selected::after{content:'✓';position:absolute;top:0.85rem;right:0.85rem;width:1.65rem;height:1.65rem;background:rgba(255,255,255,0.15);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.8rem;font-weight:700;border:1px solid rgba(255,255,255,0.4)}
.billing-badge{position:absolute;top:1rem;right:1.25rem;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:0.25rem 0.75rem;border-radius:1rem;font-size:0.75rem;font-weight:600;white-space:nowrap;box-shadow:0 5px 15px rgba(102,126,234,0.35)}
.billing-popular{position:relative}
.billing-option[data-cycle="monthly"] .billing-icon{background:rgba(59,130,246,0.15);color:#3b82f6;box-shadow:inset 0 0 0 1px rgba(59,130,246,0.25)}
.billing-option[data-cycle="quarterly"] .billing-icon{background:rgba(249,115,22,0.15);color:#f97316;box-shadow:inset 0 0 0 1px rgba(249,115,22,0.2)}
.billing-option[data-cycle="yearly"] .billing-icon{background:rgba(16,185,129,0.15);color:#059669;box-shadow:inset 0 0 0 1px rgba(16,185,129,0.2)}
.task-creator-footer{padding:1.5rem 2rem;background:var(--bg-secondary);border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.footer-info{display:flex;align-items:center;gap:1rem;color:var(--text-secondary);font-size:0.875rem}
.footer-actions{display:flex;gap:1rem}
.btn-ghost{padding:0.75rem 1.5rem;background:transparent;border:2px solid var(--border);color:var(--text);border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s}
.btn-ghost:hover{background:var(--bg-tertiary)}
.btn-primary-gradient{padding:0.75rem 2rem;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:0.5rem}
.btn-primary-gradient:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(102,126,234,0.3)}
.btn-primary-gradient:disabled{opacity:0.5;cursor:not-allowed;transform:none}
.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid var(--border);z-index:50;padding:0.5rem;box-shadow:0 -2px 10px rgba(0,0,0,0.1)}
.mobile-nav-items{display:flex;justify-content:space-around;align-items:center}
.mobile-nav-item{display:flex;flex-direction:column;align-items:center;gap:0.25rem;padding:0.5rem;color:var(--text-secondary);text-decoration:none;font-size:0.75rem;transition:var(--transition);border-radius:var(--radius);flex:1}
.mobile-nav-item:active{transform:scale(0.95)}
.mobile-nav-item.active{color:var(--primary);background:rgba(99,102,241,0.1)}
.mobile-nav-item i{font-size:1.25rem}
.mobile-menu-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:998}
.mobile-menu-overlay.active{display:block}
.mobile-menu{position:fixed;top:0;left:-100%;bottom:0;width:85%;max-width:320px;background:var(--card);transition:left 0.3s ease;z-index:999;overflow-y:auto}
.mobile-menu.active{left:0}
.mobile-menu-header{padding:1.5rem;background:var(--primary);color:white}
.mobile-menu-content{padding:1rem}
.user-menu-container{position:relative}
.user-dropdown{position:absolute;top:calc(100% + 0.5rem);right:0;min-width:220px;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow-xl);display:none;z-index:1000}
.user-dropdown.active{display:block}
.user-dropdown-item{display:flex;align-items:center;gap:0.75rem;padding:0.75rem 1rem;color:var(--text);text-decoration:none;transition:var(--transition);cursor:pointer}
.user-dropdown-item:hover{background:var(--bg-tertiary)}
.user-dropdown-item i{width:1.25rem}
.user-dropdown-item.danger{color:var(--error)}
.sessions-section{max-height:300px;overflow-y:auto}
.session-item{padding:0.75rem 1rem;border-bottom:1px solid var(--border);font-size:0.875rem}
.session-item:last-child{border-bottom:none}
.session-info{display:flex;justify-content:space-between;align-items:start;gap:0.5rem}
.session-details{flex:1}
.session-location{display:flex;align-items:center;gap:0.25rem;color:var(--text-secondary);font-size:0.8rem;margin-top:0.25rem}
.session-delete{padding:0.25rem 0.5rem;background:transparent;border:1px solid var(--border);border-radius:var(--radius-sm);color:var(--error);cursor:pointer;font-size:0.75rem;transition:var(--transition)}
.session-delete:hover{background:var(--error);color:white;border-color:var(--error)}
.mobile-search-overlay{display:none;position:fixed;top:0;left:0;right:0;background:var(--card);padding:1rem;border-bottom:1px solid var(--border);z-index:1001}
.mobile-search-overlay.active{display:block}
.mobile-search-input{width:100%;padding:0.75rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--input-bg);color:var(--text);font-size:1rem}
.mobile-search-toggle{display:none}
.domain-item{display:flex;flex-direction:column;padding:1rem;border:1px solid var(--border);border-radius:var(--radius);margin-bottom:0.75rem;gap:0.875rem;transition:all 0.2s ease;background:var(--card)}
.domain-item:hover{border-color:var(--primary)!important;box-shadow:0 2px 8px rgba(0,0,0,0.08);transform:translateY(-1px)}
.domain-url-row{display:flex;align-items:center;width:100%;padding-bottom:0.75rem;border-bottom:1px solid var(--border)}
.domain-url-text{font-weight:600;font-size:0.95rem;word-break:break-all;color:var(--text)}
.domain-actions-row{display:flex;align-items:center;justify-content:space-between;gap:0.75rem;width:100%}
.domain-status-actions{display:flex;align-items:center;gap:0.5rem;flex:1;min-width:0;flex-wrap:wrap}
.domain-status-row{display:flex;align-items:center;justify-content:space-between;gap:0.5rem;width:100%}
.domain-buttons-row{display:flex;align-items:center;gap:0.5rem;width:100%}
.domain-verify-delete{display:flex;align-items:center;gap:0.5rem;flex-shrink:0}
.domain-verify-delete-desktop{display:none}
.domain-status-badge{font-size:0.8rem;padding:0.4rem 0.75rem;font-weight:600;white-space:nowrap;flex-shrink:0}
.domain-actions-row .btn{white-space:nowrap;font-size:0.85rem;display:inline-flex;align-items:center;justify-content:center}
.btn-verify-instructions i,.btn-verify-domain i,.btn-delete-domain i{font-size:1rem;margin-right:0.25rem}
.desktop-only{display:block!important}
.mobile-only{display:none!important}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes slideDown{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes slideInRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.1)}}
@keyframes slideInMobile{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes pulseGlow{0%,100%{box-shadow:0 0 0 0 rgba(99,102,241,0.4)}50%{box-shadow:0 0 0 10px rgba(99,102,241,0)}}
@media(max-width:768px){.sidebar{display:none}.mobile-nav{display:block}.main-content{padding-bottom:60px}.header{padding:0.75rem;position:sticky;top:0;z-index:100;background:var(--bg-secondary)}.search-bar{display:none}.mobile-search-toggle{display:block;padding:0.5rem;background:transparent;border:none;color:var(--text);font-size:1.25rem;cursor:pointer}.user-dropdown{position:fixed;top:auto;bottom:0;left:0;right:0;min-width:100%;border-radius:var(--radius-lg) var(--radius-lg) 0 0;max-height:50vh;overflow-y:auto}.user-dropdown-header{display:none}.user-menu{padding:0.5rem;gap:0.5rem}.user-menu>div{display:none}.header-left{flex:1}.header-right{gap:0.5rem}.stats-grid{grid-template-columns:repeat(2,1fr);gap:0.75rem}.stat-card{padding:0.875rem}.stat-card .stat-value{font-size:1.5rem}.stat-card .stat-label{font-size:0.75rem}.task-grid{grid-template-columns:1fr}.media-grid{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}.search-bar{width:200px}.header{padding:1rem}.content{padding:1rem}.modal{width:95%;max-height:85vh}.priority-options{grid-template-columns:1fr}.chart-container{height:200px!important}.map-container{height:250px!important}.analytics-grid,div[style*="grid-template-columns: 1fr 1fr"]{grid-template-columns:1fr!important;gap:1rem!important}.card{min-width:100%}.table-container{overflow-x:auto;-webkit-overflow-scrolling:touch}table{min-width:600px}.modal{width:100%;max-width:100%;margin:0;height:100vh;max-height:100vh;border-radius:0}.modal-body{max-height:calc(100vh - 60px)}.domains-usage-container{flex-direction:column!important;gap:1rem!important}.domains-usage-container .card{flex:1!important;max-width:100%!important}.desktop-only{display:none!important}.mobile-only{display:block!important}}
@media(max-width:480px){.stats-grid{grid-template-columns:repeat(2,1fr);gap:0.5rem}.stat-card{padding:0.75rem}.stat-card .stat-value{font-size:1.25rem}.stat-card .stat-label{font-size:0.7rem}.card-header{padding:1rem}.card-body{padding:1rem}.btn{padding:0.5rem 1rem;font-size:0.8125rem}.table-container{font-size:0.8125rem}th,td{padding:0.5rem}.media-grid{grid-template-columns:1fr}.header{position:sticky;top:0;background:var(--bg-secondary);z-index:100;border-bottom:1px solid var(--border)}.mobile-nav-item span{font-size:0.625rem}.mobile-nav-item i{font-size:1.125rem}.pagination-info{display:none}.user-menu{background:transparent;padding:0.375rem}.user-avatar{width:28px;height:28px;font-size:0.875rem}}
@media(min-width:769px){.domain-actions-row{flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between;gap:0.5rem}.domain-status-row{display:flex;flex-direction:row;align-items:center;gap:0.5rem;flex:1;min-width:0;width:auto}.domain-status-row .domain-verify-delete{display:none!important}.domain-verify-delete-desktop{display:flex!important;align-items:center;gap:0.5rem;flex-shrink:0}.domain-buttons-row{display:flex;flex-direction:row;align-items:center;gap:0.5rem;width:auto;flex-shrink:0}.domain-verify-delete{gap:0.5rem}}
@media(min-width:581px) and (max-width:768px){.domain-status-row{gap:0.5rem}.domain-buttons-row{gap:0.5rem}.domain-verify-delete{gap:0.5rem}.domain-status-row .domain-verify-delete{display:none!important}.domain-verify-delete-desktop{display:flex!important}.domain-actions-row{flex-direction:row;flex-wrap:wrap}.domain-actions-row .btn{font-size:0.85rem;padding:0.4rem 0.8rem}}
@media(max-width:768px){.collapsible-header #domainsContentIcon,.collapsible-header #usageContentIcon{display:inline-block!important}.collapsible-content{max-height:1000px;overflow:hidden;transition:max-height 0.3s ease,padding 0.3s ease}.collapsible-content.collapsed{max-height:0!important;padding-top:0!important;padding-bottom:0!important;border-top:none!important}.usage-category{padding:0.75rem;background:var(--bg-secondary);border-radius:var(--radius-sm)}}
@media(min-width:769px){.collapsible-header{cursor:default!important}}
.usage-category{transition:transform 0.2s ease}
.usage-category:hover{transform:translateY(-2px)}
@media(max-width:580px){.usage-category{padding:0.5rem!important;background:var(--bg-secondary)!important}.usage-category i{font-size:1rem!important}.mobilearticle1{flex-direction:column!important;align-items:flex-start!important;gap:14px!important}.mobilearticle2{align-items:flex-start!important;gap:14px!important}.domains-usage-container{flex-direction:column-reverse!important;gap:1rem!important}.domain-item{padding:0.875rem!important;gap:0.75rem!important}.domain-url-row{padding-bottom:0.625rem!important}.domain-url-text{font-size:0.9rem!important}.domain-actions-row{display:flex!important;flex-direction:column!important;align-items:stretch!important;gap:0.75rem!important;width:100%!important}.domain-status-row{display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:space-between!important;gap:0.5rem!important;width:100%!important}.domain-status-badge{font-size:0.75rem!important;padding:0.35rem 0.65rem!important;flex-shrink:0!important}.domain-verify-delete-desktop{display:none!important}.domain-status-row .domain-verify-delete{display:flex!important;align-items:center!important;gap:0.4rem!important;flex-shrink:0!important;margin-left:auto!important}.domain-buttons-row{display:flex!important;flex-direction:row!important;align-items:center!important;gap:0.5rem!important;width:100%!important}.btn-verify-instructions{padding:0.4rem 0.6rem!important;font-size:0.75rem!important;min-height:32px!important;flex-shrink:0!important;flex:1!important}.btn-verify-domain{padding:0.4rem 0.6rem!important;font-size:0.75rem!important;min-height:32px!important;flex-shrink:0!important;flex:1!important}.btn-delete-domain{padding:0.4rem 0.6rem!important;font-size:0.75rem!important;min-height:32px!important;flex-shrink:0!important}.btn-delete-text{display:inline!important}.domain-actions-row .btn i{font-size:0.95rem!important;margin-right:0.3rem!important}.logo{color:white!important}.user-menu-container{display:none!important}}
div#modalBody{padding-bottom:100px}
.swal2-popup.swal2-toast{box-shadow:0 10px 30px rgba(0,0,0,0.15),0 0 40px rgba(99,102,241,0.08)!important;background:linear-gradient(135deg,var(--card) 0%,var(--bg-secondary) 100%)!important;border:1px solid var(--border)!important;border-radius:1rem!important}
.swal2-title{color:var(--text)!important}
.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:flex-start!important;margin:0!important;font-size:3em!important}
.swal2-popup{background:var(--card)!important;color:var(--text)!important;border:none!important;border-radius:1.25rem!important;box-shadow:0 20px 40px rgba(0,0,0,0.2),0 0 80px rgba(99,102,241,0.1)!important}
.swal2-title{color:var(--text)!important}
.swal2-html-container{color:var(--text)!important}
.swal2-html-container .card{background:var(--bg-tertiary)!important;border-color:var(--border)!important}
.swal2-html-container .card-header{border-bottom-color:var(--border)!important}
.swal2-html-container .card-title{color:var(--text)!important}
.swal2-html-container .form-label{color:var(--text)!important}
.swal2-html-container .form-input,.swal2-html-container .form-select,.swal2-html-container .form-textarea{background:var(--input-bg)!important;color:var(--text)!important;border-color:var(--border)!important}
.swal2-html-container code{background:var(--bg-tertiary)!important;color:var(--text)!important;border:1px solid var(--border)!important}
.swal2-html-container .empty-state-title{color:var(--text)!important}
.swal2-html-container .empty-state-description{color:var(--text-secondary)!important}
.swal2-icon{margin:1rem auto!important;width:5rem!important;height:5rem!important;border-width:3px!important}
.swal2-icon.swal2-warning{border-color:var(--warning)!important;color:var(--warning)!important}
.swal2-icon.swal2-error{border-color:var(--error)!important}
.swal2-icon.swal2-success{border-color:var(--success)!important}
.swal2-icon.swal2-info{border-color:var(--primary)!important;color:var(--primary)!important}
.swal2-title{color:var(--text)!important;font-weight:700!important;font-size:1.5rem!important;margin-bottom:0.5rem!important}
.swal2-html-container{color:var(--text-secondary)!important;font-size:0.9375rem!important;line-height:1.6!important}
.swal2-actions{gap:0.75rem!important;margin-top:1.5rem!important}
.swal2-confirm,.swal2-cancel,.swal2-deny{padding:0.75rem 1.5rem!important;border-radius:0.625rem!important;font-weight:600!important;font-size:0.9375rem!important;transition:all 0.3s!important;border:none!important}
.swal2-confirm{background:linear-gradient(135deg,var(--primary) 0%,#764ba2 100%)!important;box-shadow:0 4px 12px rgba(99,102,241,0.3)!important}
.swal2-confirm:hover{transform:translateY(-2px)!important;box-shadow:0 6px 20px rgba(99,102,241,0.4)!important}
.swal2-cancel{background:var(--bg-tertiary)!important;color:var(--text)!important;border:2px solid var(--border)!important}
.swal2-cancel:hover{background:var(--bg-secondary)!important;border-color:var(--text-secondary)!important}
.swal2-input{background:var(--bg-secondary)!important;color:var(--text)!important;border:2px solid var(--border)!important;border-radius:0.625rem!important;padding:0.75rem!important;font-size:0.9375rem!important;transition:all 0.3s!important}
.swal2-input:focus{border-color:var(--primary)!important;box-shadow:0 0 0 3px rgba(99,102,241,0.1)!important}
@media(max-width:768px){.swal2-popup{max-height:90vh!important;width:calc(100vw - 2rem)!important;margin:1rem!important;padding:1.25rem!important;border-radius:1rem!important;padding-top:3rem!important}.swal2-html-container{max-height:60vh!important;overflow-y:auto!important;padding:0.5rem!important;padding-bottom:2rem!important}.swal2-toast button:where(.swal2-close){position:absolute!important;top:0.5rem!important;right:0.5rem!important;grid-column:unset!important;grid-row:unset!important;font-size:2em!important;z-index:2!important}.swal2-html-container{position:relative!important}.swal2-html-container button:where(.swal2-close){position:absolute!important;top:-2.5rem!important;right:-0.5rem!important;z-index:10!important}.swal2-html-container .card-body{padding:0.75rem!important;max-height:none!important}#aiKeywordsBtn{white-space:nowrap!important;flex-shrink:0!important;padding:0.5rem 0.75rem!important;font-size:0.85rem!important}#aiKeywordsBtn i{margin-right:0.25rem!important}#taskBudget{font-size:1.1rem!important;font-weight:600!important;padding:0.75rem 1rem 0.75rem 2.25rem!important}.card-body>div[style*="grid-template-columns"]{grid-template-columns:repeat(2,1fr)!important;gap:0.75rem!important}#current-images-container{grid-template-columns:repeat(2,1fr)!important;gap:0.75rem!important}#cancelPreviousContainer{padding:1rem!important;margin-bottom:1rem!important}#cancelPreviousContainer label{font-size:0.85rem!important;line-height:1.4!important}#previousTasksWarning{font-size:0.8rem!important;padding:0.65rem!important}.swal2-html-container canvas{max-height:200px!important}.chart-container{height:250px!important;margin-bottom:1rem}.stat-card .stat-value{font-size:1.5rem!important}.stat-card .stat-label{font-size:0.75rem!important}.card{margin-bottom:1rem}.btn{padding:0.5rem 1rem;font-size:0.875rem}.btn-sm{padding:0.375rem 0.75rem;font-size:0.8rem}.table-responsive{font-size:0.8rem}.modal-analytics-grid{grid-template-columns:1fr!important;gap:1rem!important}.stat-card-grid{grid-template-columns:repeat(2,1fr)!important;gap:0.5rem!important}.swal2-title{font-size:1.1rem!important;padding:0.5rem 0!important}.swal2-actions{flex-wrap:wrap!important;gap:0.5rem!important}.swal2-actions button{font-size:0.85rem!important;padding:0.5rem 1rem!important;margin:0!important}}
.mobile-profile-menu{display:none;padding:0;border-radius:50%;background:transparent;border:none;color:var(--text);cursor:pointer;font-size:1.25rem;transition:var(--transition);position:relative}
.mobile-profile-menu:hover .user-avatar{box-shadow:0 2px 8px rgba(0,0,0,0.15)}
.mobile-profile-menu .user-avatar{width:36px;height:36px;border-radius:50%;background:var(--gradient-primary);display:flex;align-items:center;justify-content:center;color:white;font-weight:600;font-size:0.875rem;transition:box-shadow 0.2s ease}
.mobile-profile-dropdown{display:none;position:fixed;top:60px;right:1rem;background:var(--card);border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.2);z-index:10001;overflow:hidden;animation:slideDown 0.2s ease;min-width:280px}
.mobile-profile-dropdown.active{display:block}
@media(min-width:550px){.hidedesktop{display:none!important}.mobile-profile-menu{display:none!important}}
@media(max-width:550px){.mobile-profile-menu{display:flex}.user-menu-container{display:none!important}}
@media(max-width:600px){.stat-card>.stat-icon{display:none!important}}
.swal2-popup-custom-task{margin:0!important;padding:0!important}
.swal2-container{z-index:10000!important}
@media(max-width:480px){.priority-option{padding-top:34px!important}.progress-steps{margin-bottom:1rem!important;min-height:80px!important}}
@media(min-width:770px){span.billing-save{margin-top:18px!important;font-size:11px!important;text-align:center!important}}
@media(max-width:769px){.billing-option{max-width:100%!important}input#estimatedClicks{height:49px!important;padding-left:38px!important;font-size:1rem!important}.budget-field .currency-symbol{top:43px!important;left:14px!important}.budget-summary-value{font-size:0.975rem;padding-top:10px}div#finalAmount{padding-top:3px!important}.progress-step{margin-bottom:0px!important}.billing-cycle-options{flex-direction:row!important}.billing-option{max-width:none!important;width:32%!important;min-width:auto!important}.billing-cycle-options .billing-option-top{flex-direction:column!important}.progress-step.completed .step-indicator::before{display:none!important}.step-indicator{padding:0!important;margin:0!important}.progress-steps{margin-bottom:0px!important}.task-creator-sidebar{padding:0 6px!important}}
</style>
<script>
const API_BASE='https://api.seotize.net';let sessionToken=getCookie('session_token')||localStorage.getItem('authToken');let paginationHandlers={};function callPaginationHandler(handlerId,page){if(paginationHandlers[handlerId]){paginationHandlers[handlerId](page)}}let currentData={user:null,tasks:[],images:[],articles:[],domains:[],billing:[],selectedLocations:[],currentStep:1,taskPriority:'standard',selectedKeywords:[],usage:null,plan:null};let charts={};let globalMap=null;let paginationState={tasks:{page:1,pageSize:10,total:0,hasNext:false},images:{page:1,pageSize:20,total:0,hasNext:false},articles:{page:1,pageSize:10,total:0,hasNext:false},billing:{page:1,pageSize:10,total:0,hasNext:false}};function handlePaymentRedirect(){const urlParams=new URLSearchParams(window.location.search);const status=urlParams.get('transaction_status');const paymentId=urlParams.get('payment_id');if(status==='success'&&paymentId){setTimeout(()=>{viewPaymentDetails(paymentId)},1000);window.history.replaceState({},document.title,window.location.pathname)}else if(status==='cancel'){setTimeout(()=>{showToast('Your payment was cancelled.','warning')},1000);window.history.replaceState({},document.title,window.location.pathname)}}document.addEventListener('DOMContentLoaded',()=>{if(!sessionToken){window.location.href='/login.html';return}initializeEventListeners();handlePaymentRedirect();loadDashboard();initializeTheme();setTimeout(()=>{updateUserInfo()},100)});function initializeEventListeners(){document.querySelectorAll('.sidebar .nav-item[data-page]').forEach(item=>{item.addEventListener('click',(e)=>{e.preventDefault();navigateTo(item.dataset.page)})});document.querySelectorAll('.mobile-nav-item[data-page]').forEach(item=>{item.addEventListener('click',(e)=>{e.preventDefault();navigateTo(item.dataset.page)})});document.querySelectorAll('.mobile-menu .nav-item[data-page]').forEach(item=>{item.addEventListener('click',(e)=>{e.preventDefault();closeMobileMenu();navigateTo(item.dataset.page)})});document.getElementById('modalOverlay').addEventListener('click',(e)=>{if(e.target===e.currentTarget){closeModal()}});document.addEventListener('click',(e)=>{const userMenuContainer=document.querySelector('.user-menu-container');const userDropdown=document.getElementById('userDropdown');if(!userMenuContainer.contains(e.target)){userDropdown.classList.remove('active')}});document.getElementById('mobileMenuOverlay')?.addEventListener('click',closeMobileMenu)}function openMobileMenu(){document.getElementById('mobileMenu').classList.add('active');document.getElementById('mobileMenuOverlay').classList.add('active')}function closeMobileMenu(){document.getElementById('mobileMenu').classList.remove('active');document.getElementById('mobileMenuOverlay').classList.remove('active')}function toggleMobileProfileDropdown(event){event.stopPropagation();const dropdown=document.getElementById('mobileProfileDropdown');if(dropdown){dropdown.classList.toggle('active');if(dropdown.classList.contains('active')){const user=currentData.user;if(user){const initial=(user.email||'U').charAt(0).toUpperCase();document.getElementById('mobileDropdownUserInitial').textContent=initial;const nameEl=document.getElementById('mobileDropdownUserName');if(nameEl)nameEl.style.display='none';document.getElementById('mobileDropdownUserEmail').textContent=user.email||'';const otherSessions=getOtherSessions();const sessionCount=otherSessions.length+1;document.getElementById('mobileDropdownSessionCount').textContent=sessionCount}}}}function closeMobileProfileDropdown(){const dropdown=document.getElementById('mobileProfileDropdown');if(dropdown){dropdown.classList.remove('active')}}function toggleMobileSearch(){const overlay=document.getElementById('mobileSearchOverlay');overlay.classList.toggle('active');if(overlay.classList.contains('active')){overlay.querySelector('input').focus()}}function toggleUserDropdown(){const dropdown=document.getElementById('userDropdown');dropdown.classList.toggle('active')}function getOtherSessions(){const sessions=currentData.user?.sessions||[];return sessions.filter(session=>session.token!==sessionToken)}function getCurrentSession(){const sessions=currentData.user?.sessions||[];return sessions.find(session=>session.token===sessionToken)}function showSessionsModal(){document.getElementById('userDropdown').classList.remove('active');const otherSessions=getOtherSessions();const currentSession=getCurrentSession();const createSessionCard=(session,isCurrent=false)=>{const createdDate=new Date(session.timestamp);const expiresDate=new Date(session.expires_at);const isExpired=expiresDate<new Date();return`<div class="session-card ${isCurrent?'session-card--current':''}"><div class="session-icon"><i class="ri-computer-line"></i></div><div class="session-details"><div class="session-main-info">${session.country_code} - ${session.ip_address}${isCurrent?'<span class="badge badge-success" style="margin-left: 0.5rem;">This Device</span>':''}${isExpired?'<span class="badge badge-danger" style="margin-left: 0.5rem;">Expired</span>':''}</div><div class="session-meta-info"><span><strong>Created:</strong> ${createdDate.toLocaleString()}</span><span><strong>Expires:</strong> ${isExpired?'Already Expired':expiresDate.toLocaleString()}</span></div></div>${!isCurrent?`<div class="session-actions"><button class="btn btn-sm btn-danger" onclick="revokeSession('${session.token}')">Revoke</button></div>`:''}</div>`};let modalHtml=`<div class="sessions-modal-container"><p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Manage your active login sessions. For security, revoke any sessions you don't recognize.</p>${currentSession?`<h3 class="sessions-section-title"><i class="ri-shield-check-line"></i>Current Session</h3>${createSessionCard(currentSession,true)}`:''} ${otherSessions.length>0?`<h3 class="sessions-section-title"><i class="ri-device-line"></i>Other Active Sessions</h3><div>${otherSessions.map(session=>createSessionCard(session)).join('')}</div><button class="btn btn-danger" onclick="revokeAllSessions()"><i class="ri-logout-box-r-line"></i> Revoke All Other Sessions (${otherSessions.length})</button>`:`<div class="empty-state" style="padding: 1rem 0;"><div class="empty-state-icon"><i class="ri-shield-star-line"></i></div><div class="empty-state-title" style="font-size: 1.2rem;">You're only logged in here.</div><p class="empty-state-description">No other active sessions were found.</p></div>`}</div>`;Swal.fire({title:'Active Sessions',html:modalHtml,showConfirmButton:false,showCloseButton:true,width:'95vw',customClass:{popup:'sessions-modal-custom',footer:'swal2-footer',closeButton:'swal2-close'}})}async function revokeSession(token){Swal.fire({title:'Revoke this session?',text:"The user logged in on that device will be signed out.",icon:'warning',showCancelButton:true,confirmButtonColor:'var(--error)',confirmButtonText:'Yes, revoke it!',customClass:{popup:'swal2-toast'}}).then(async(result)=>{if(result.isConfirmed){Swal.fire({title:'Revoking...',didOpen:()=>Swal.showLoading(),customClass:{popup:'swal2-toast'}});try{await fetch(`${API_BASE}/logout`,{method:'GET',headers:{'Session-Token':token,'Content-Type':'application/json'}});if(currentData.user&&currentData.user.sessions){currentData.user.sessions=currentData.user.sessions.filter(s=>s.token!==token)}Swal.close();showToast('Session revoked successfully','success');showSessionsModal();updateUserInfo()}catch(error){Swal.fire('Error!','Failed to revoke session: '+error.message,'error')}}})}async function revokeAllSessions(){const sessionsToRevoke=getOtherSessions();const total=sessionsToRevoke.length;if(total===0){Swal.fire({title:'No Other Sessions',text:'You are only logged in on this device.',icon:'info',customClass:{popup:'swal2-toast'}});return}Swal.fire({title:`Revoke all ${total} other sessions?`,text:"You will be logged out from all other devices immediately.",icon:'warning',showCancelButton:true,confirmButtonColor:'var(--error)',confirmButtonText:'Yes, revoke all!',customClass:{popup:'swal2-toast'}}).then(async(result)=>{if(result.isConfirmed){Swal.fire({title:`Revoking 1 of ${total}...`,didOpen:()=>Swal.showLoading(),allowOutsideClick:false,allowEscapeKey:false,customClass:{popup:'swal2-toast'}});let successCount=0;let failCount=0;const tokensToRevoke=sessionsToRevoke.map(s=>s.token);const successfulTokens=[];for(let i=0;i<total;i++){const token=tokensToRevoke[i];Swal.update({title:`Revoking ${i+1} of ${total}...`});try{await fetch(`${API_BASE}/logout`,{method:'GET',headers:{'Session-Token':token,'Content-Type':'application/json'}});successCount++;successfulTokens.push(token)}catch(error){console.error('Failed to revoke session:',token,error);failCount++}}if(currentData.user&&currentData.user.sessions){currentData.user.sessions=currentData.user.sessions.filter(s=>{if(s.token===sessionToken)return true;if(!successfulTokens.includes(s.token))return true;return false})}Swal.close();if(failCount===0){showToast(`All ${total} other sessions revoked!`,'success')}else{Swal.fire({title:'Partial Success',text:`Successfully revoked ${successCount} of ${total} sessions. ${failCount} failed.`,icon:'warning',customClass:{popup:'swal2-toast'}})}showSessionsModal();updateUserInfo()}})}function initializeTheme(){const savedTheme=localStorage.getItem('theme')||'light';document.body.setAttribute('data-theme',savedTheme);updateThemeIcon(savedTheme)}function toggleTheme(){const currentTheme=document.body.getAttribute('data-theme');const newTheme=currentTheme==='light'?'dark':'light';document.body.setAttribute('data-theme',newTheme);localStorage.setItem('theme',newTheme);updateThemeIcon(newTheme);if(charts.traffic){setTimeout(updateCharts,100)}}function updateThemeIcon(theme){document.getElementById('themeIcon').className=theme==='light'?'ri-moon-line':'ri-sun-line'}function navigateTo(page){document.querySelectorAll('.sidebar .nav-item').forEach(item=>item.classList.remove('active'));document.querySelector(`.sidebar .nav-item[data-page="${page}"]`)?.classList.add('active');document.querySelectorAll('.mobile-nav-item').forEach(item=>item.classList.remove('active'));document.querySelector(`.mobile-nav-item[data-page="${page}"]`)?.classList.add('active');switch(page){case'dashboard':loadDashboard();break;case'tasks':loadTasks();break;case'images':loadImages();break;case'articles':loadArticles();break;case'billing':loadBilling();break;case'profile':loadProfile();break}}function updateUserInfo(){const user=currentData.user;if(!user)return;const email=user.email;const name=email.split('@')[0];const initial=email[0].toUpperCase();document.getElementById('userInitial').textContent=initial;document.getElementById('userName').textContent=name;document.getElementById('userEmail').textContent=email;const mobileAvatar=document.getElementById('mobileUserAvatar');if(mobileAvatar)mobileAvatar.textContent=initial;const mobileMenuInitial=document.getElementById('mobileMenuUserInitial');if(mobileMenuInitial)mobileMenuInitial.textContent=initial;const mobileMenuName=document.getElementById('mobileMenuUserName');if(mobileMenuName)mobileMenuName.textContent=name;const mobileMenuEmail=document.getElementById('mobileMenuUserEmail');if(mobileMenuEmail)mobileMenuEmail.textContent=email;const mobileMenuTaskCount=document.getElementById('mobileMenuTaskCount');if(mobileMenuTaskCount&&currentData.tasks){mobileMenuTaskCount.textContent=currentData.tasks.length}const mobileMenuArticleCount=document.getElementById('mobileMenuArticleCount');if(mobileMenuArticleCount&&currentData.articles){mobileMenuArticleCount.textContent=currentData.articles.length}const otherSessions=getOtherSessions();const totalSessions=otherSessions.length+1;const desktopCountEl=document.getElementById('sessionCount');if(desktopCountEl)desktopCountEl.textContent=totalSessions;const mobileCountEl=document.getElementById('sessionCountMobile');if(mobileCountEl)mobileCountEl.textContent=totalSessions}async function api(endpoint,options={}){try{const response=await fetch(`${API_BASE}${endpoint}`,{...options,headers:{'Session-Token':sessionToken,'Content-Type':'application/json',...(options.headers||{})}});if(response.status===401||response.status===403){document.cookie='session_token=; path=/; Domain=.seotize.net; Secure; SameSite=Lax; expires=Thu, 01 Jan 1970 00:00:00 GMT';localStorage.removeItem('authToken');window.location.href='/login.html';return}const data=await response.json();if(!response.ok){const apiError=new Error(data.error?.message||data.message||'API Error');apiError.code=data.error?.code||response.status;apiError.data=data;throw apiError}return data}catch(error){console.error('API Error:',error);if(error.code!==409){showToast(error.message,'error')}throw error}}function formatNumber(num){if(num<1000){return num.toString()}else if(num<1000000){return(num/1000).toFixed(1).replace('.0','')+'k'}else if(num<1000000000){return(num/1000000).toFixed(1).replace('.0','')+'M'}else{return(num/1000000000).toFixed(1).replace('.0','')+'B'}}function toggleSection(sectionId){const content=document.getElementById(sectionId);const icon=document.getElementById(sectionId+'Icon');if(!content)return;if(window.innerWidth<=768){content.classList.toggle('collapsed');if(icon){if(content.classList.contains('collapsed')){icon.style.transform='rotate(-90deg)'}else{icon.style.transform='rotate(0deg)'}}}};async function loadDashboard(){try{const data=await api('/users/dashboard?page=1&page_size=10');currentData.user=data.user;currentData.tasks=data.tasks||[];currentData.domains=data.domains||[];currentData.usage=data.usage;currentData.plan=data.user?.hosting_plan||{plan_name:'Basic',articles_limit:10,domains_limit:1,monthly_price:0};paginationState.tasks={page:1,pageSize:10,total:data.tasks_total||0,hasNext:data.has_next||false};document.getElementById('content').innerHTML=renderDashboardContent();updateUserInfo();updateCharts()}catch(error){showToast('Failed to load dashboard','error');console.error('Dashboard load error:',error)}};function renderDashboardContent(){const tasksCount=currentData.tasks.length;const articlesCount=currentData.articles.length;const imagesCount=currentData.images.length;const activeTasksCount=currentData.tasks.filter(t=>t.status==='active').length;return`<div class="stats-grid"><div class="stat-card"><div class="stat-icon primary"><i class="ri-list-check"></i></div><div class="stat-content"><div class="stat-value">${tasksCount}</div><div class="stat-label">Active Tasks</div></div></div><div class="stat-card"><div class="stat-icon success"><i class="ri-article-line"></i></div><div class="stat-content"><div class="stat-value">${articlesCount}</div><div class="stat-label">Published Articles</div></div></div><div class="stat-card"><div class="stat-icon warning"><i class="ri-image-line"></i></div><div class="stat-content"><div class="stat-value">${imagesCount}</div><div class="stat-label">Hosted Images</div></div></div><div class="stat-card"><div class="stat-icon error"><i class="ri-eye-line"></i></div><div class="stat-content"><div class="stat-value">${formatNumber(currentData.tasks.reduce((sum,t)=>sum+(t.views||0),0))}</div><div class="stat-label">Total Views</div></div></div></div><div class="card"><div class="card-header"><h2 class="card-title">Traffic Overview</h2></div><div class="card-body"><div class="chart-container"><canvas id="trafficChart"></canvas></div></div></div><div class="card" style="margin-top: 1.5rem;"><div class="card-header"><h2 class="card-title">Recent Tasks</h2><button class="btn btn-primary btn-sm" onclick="showTaskCreator()"><i class="ri-add-line"></i> New Task</button></div><div class="card-body">${renderTasksGrid(currentData.tasks.slice(0,6))}</div></div>`};async function loadTasks(page=1){try{const data=await api(`/users/dashboard?page=${page}&page_size=10`);currentData.tasks=data.tasks||[];paginationState.tasks={page,pageSize:10,total:data.tasks_total||0,hasNext:data.has_next||false};document.getElementById('content').innerHTML=renderTasksContent();updateCharts()}catch(error){showToast('Failed to load tasks','error')}};function renderTasksContent(){return`<div class="card"><div class="card-header"><h2 class="card-title">SEO Tasks</h2><button class="btn btn-primary" onclick="showTaskCreator()"><i class="ri-add-line"></i> New Task</button></div><div class="card-body">${renderTasksGrid(currentData.tasks)}${renderPagination('tasks')}</div></div>`};function renderTasksGrid(tasks){if(!tasks||tasks.length===0){return`<div class="empty-state"><div class="empty-state-icon"><i class="ri-task-line"></i></div><div class="empty-state-title">No tasks yet</div><div class="empty-state-description">Create your first SEO task to get started</div><button class="btn btn-primary" onclick="showTaskCreator()"><i class="ri-add-line"></i> Create Task</button></div>`}return`<div class="task-grid">${tasks.map(task=>renderTaskCard(task)).join('')}</div>`};function renderTaskCard(task){const statusClass=task.verified?(task.status==='active'?'active':(task.status==='paused'?'paused':'completed')):'unverified';const statusText=task.verified?(task.status==='active'?'Active':(task.status==='paused'?'Paused':'Completed')):'Unverified';const progress=task.budget>0?Math.min((task.spent/task.budget)*100,100):0;return`<div class="task-card ${!task.verified?'unverified':''}" onclick="viewTaskDetails('${task._id}')"><div class="task-header"><a href="${task.url}" class="task-url" target="_blank" onclick="event.stopPropagation()">${task.url}</a><span class="task-status ${statusClass}">${statusText}</span></div><div class="task-stats"><div class="task-stat"><div class="task-stat-label">Views</div><div class="task-stat-value">${formatNumber(task.views||0)}</div></div><div class="task-stat"><div class="task-stat-label">Budget</div><div class="task-stat-value">$${task.budget.toFixed(2)}</div></div></div><div class="task-progress"><div class="progress-bar"><div class="progress-fill" style="width: ${progress}%"></div></div></div><div class="task-actions" onclick="event.stopPropagation()">${!task.verified?`<button class="btn btn-primary btn-sm" onclick="verifyTask('${task._id}')"><i class="ri-check-line"></i> Verify</button>`:''}<button class="btn btn-secondary btn-sm" onclick="rechargeTask('${task._id}')"><i class="ri-money-dollar-circle-line"></i> Recharge</button>${task.verified?`<button class="btn btn-danger btn-sm" onclick="deleteTask('${task._id}')"><i class="ri-delete-bin-line"></i></button>`:''}</div></div>`};function renderPagination(type){const state=paginationState[type];if(!state||state.total===0)return'';const totalPages=Math.ceil(state.total/state.pageSize);if(totalPages<=1)return'';const pages=[];const maxVisible=5;let startPage=Math.max(1,state.page-Math.floor(maxVisible/2));let endPage=Math.min(totalPages,startPage+maxVisible-1);if(endPage-startPage<maxVisible-1){startPage=Math.max(1,endPage-maxVisible+1)}return`<div class="pagination"><button class="pagination-btn" ${state.page===1?'disabled':''} onclick="callPaginationHandler('${type}',${state.page-1})"><i class="ri-arrow-left-s-line"></i></button>${startPage>1?`<button class="pagination-btn" onclick="callPaginationHandler('${type}',1)">1</button>${startPage>2?'<span style="margin: 0 0.5rem;">...</span>':''}`:''} ${Array.from({length:endPage-startPage+1},(v,i)=>startPage+i).map(p=>`<button class="pagination-btn ${p===state.page?'active':''}" onclick="callPaginationHandler('${type}',${p})">${p}</button>`).join('')} ${endPage<totalPages?`${endPage<totalPages-1?'<span style="margin: 0 0.5rem;">...</span>':''}<button class="pagination-btn" onclick="callPaginationHandler('${type}',${totalPages})">${totalPages}</button>`:''}<button class="pagination-btn" ${!state.hasNext?'disabled':''} onclick="callPaginationHandler('${type}',${state.page+1})"><i class="ri-arrow-right-s-line"></i></button><div class="pagination-info">Page ${state.page} of ${totalPages}</div></div>`};paginationHandlers.tasks=(page)=>loadTasks(page);paginationHandlers.images=(page)=>loadImages(page);paginationHandlers.articles=(page)=>loadArticles(page);paginationHandlers.billing=(page)=>loadBilling(page);function updateCharts(){const tasks=currentData.tasks.filter(t=>t.verified);if(!tasks.length)return;const ctx=document.getElementById('trafficChart');if(!ctx)return;if(charts.traffic){charts.traffic.destroy()}const labels=tasks.map((t,i)=>`Task ${i+1}`);const views=tasks.map(t=>t.views||0);const isDark=document.body.getAttribute('data-theme')==='dark';charts.traffic=new Chart(ctx,{type:'line',data:{labels,datasets:[{label:'Views',data:views,borderColor:'rgba(99,102,241,1)',backgroundColor:'rgba(99,102,241,0.1)',tension:0.4,fill:true}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:true,labels:{color:isDark?'#fff':'#212529'}}},scales:{y:{beginAtZero:true,grid:{color:isDark?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)'},ticks:{color:isDark?'#a0a0a0':'#6c757d'}},x:{grid:{color:isDark?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)'},ticks:{color:isDark?'#a0a0a0':'#6c757d'}}}}})}
async function viewTaskDetails(taskId){const task=currentData.tasks.find(t=>t._id===taskId);if(!task)return;const progress=task.budget>0?(task.spent/task.budget)*100:0;const statusBadge=task.verified?(task.status==='active'?'<span class="badge badge-success">Active</span>':(task.status==='paused'?'<span class="badge badge-warning">Paused</span>':'<span class="badge badge-primary">Completed</span>')):'<span class="badge badge-danger">Unverified</span>';const analytics=task.analytics||{timeline:[],countries:{},browsers:{},devices:{}};const timelineData=analytics.timeline||[];const labels=timelineData.map(d=>d.date);const views=timelineData.map(d=>d.views);const isDark=document.body.getAttribute('data-theme')==='dark';Swal.fire({title:`Task Details: ${task.url}`,html:`<div class="card"><div class="card-body"><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;"><div class="stat-card"><div class="stat-icon primary"><i class="ri-eye-line"></i></div><div class="stat-content"><div class="stat-value">${formatNumber(task.views||0)}</div><div class="stat-label">Total Views</div></div></div><div class="stat-card"><div class="stat-icon success"><i class="ri-money-dollar-circle-line"></i></div><div class="stat-content"><div class="stat-value">$${task.budget.toFixed(2)}</div><div class="stat-label">Budget</div></div></div><div class="stat-card"><div class="stat-icon warning"><i class="ri-wallet-line"></i></div><div class="stat-content"><div class="stat-value">$${task.spent.toFixed(2)}</div><div class="stat-label">Spent</div></div></div></div><div style="margin-bottom: 1rem;"><strong>Status:</strong> ${statusBadge}</div><div style="margin-bottom: 1rem;"><strong>Priority:</strong> <span class="badge badge-primary">${task.priority||'standard'}</span></div><div style="margin-bottom: 1rem;"><strong>Keywords:</strong> ${(task.keywords||[]).map(k=>`<span class="badge badge-primary">${k}</span>`).join(' ')}</div><div class="task-progress" style="margin: 1rem 0;"><div class="progress-bar"><div class="progress-fill" style="width: ${progress}%"></div></div><div style="text-align: center; margin-top: 0.5rem; color: var(--text-secondary);">${progress.toFixed(1)}% Budget Used</div></div>${timelineData.length>0?`<div class="chart-container" style="margin-top: 1.5rem;"><canvas id="taskTimelineChart"></canvas></div>`:'<p style="text-align: center; color: var(--text-secondary); margin: 2rem 0;">No analytics data available yet</p>'}</div></div>`,width:'95vw',showCancelButton:false,confirmButtonText:'Close',didOpen:()=>{if(timelineData.length>0){const ctx=document.getElementById('taskTimelineChart');new Chart(ctx,{type:'line',data:{labels,datasets:[{label:'Views Over Time',data:views,borderColor:'rgba(99,102,241,1)',backgroundColor:'rgba(99,102,241,0.1)',tension:0.4,fill:true}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:isDark?'#fff':'#212529'}}},scales:{y:{beginAtZero:true,grid:{color:isDark?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)'},ticks:{color:isDark?'#a0a0a0':'#6c757d'}},x:{grid:{color:isDark?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)'},ticks:{color:isDark?'#a0a0a0':'#6c757d'}}}}})}}})};async function verifyTask(taskId){const task=currentData.tasks.find(t=>t._id===taskId);if(!task)return;Swal.fire({title:'Verifying Task...',text:'Checking if the task code is properly installed...',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});try{const data=await api(`/verify-task?task_id=${taskId}`);Swal.close();if(data.verified){showToast('Task verified successfully!','success');await loadTasks(paginationState.tasks.page)}else{showToast('Task verification failed. Please check the installation.','error')}}catch(error){Swal.fire('Verification Failed',error.message,'error')}};async function rechargeTask(taskId){const task=currentData.tasks.find(t=>t._id===taskId);if(!task)return;Swal.fire({title:'Recharge Task',html:`<div class="card"><div class="card-body"><p style="margin-bottom: 1.5rem; color: var(--text-secondary);">Add more budget to continue this task.</p><div class="form-group"><label class="form-label">Current Budget: $${task.budget.toFixed(2)}</label></div><div class="form-group"><label class="form-label">Additional Amount ($)</label><input type="number" id="rechargeAmount" class="form-input" min="10" step="0.01" placeholder="Enter amount"></div><div class="form-group"><label class="form-label">Payment Method</label><select id="rechargePaymentMethod" class="form-select"><option value="stripe">Credit/Debit Card (Stripe)</option><option value="oxapay">Cryptocurrency (OxaPay)</option></select></div></div></div>`,showCancelButton:true,confirmButtonText:'Proceed to Payment',preConfirm:()=>{const amount=parseFloat(document.getElementById('rechargeAmount').value);const paymentMethod=document.getElementById('rechargePaymentMethod').value;if(!amount||amount<10){Swal.showValidationMessage('Minimum recharge amount is $10');return false}return{amount,paymentMethod}}}).then(async(result)=>{if(result.isConfirmed){const{amount,paymentMethod}=result.value;Swal.fire({title:'Processing...',text:'Creating payment request...',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});try{const data=await api('/recharge',{method:'POST',body:JSON.stringify({task_id:taskId,amount,payment_method:paymentMethod})});if(data.payment_url){window.location.href=data.payment_url}else{showToast('Payment initiated successfully','success')}}catch(error){Swal.fire('Error',error.message,'error')}}})};async function deleteTask(taskId){Swal.fire({title:'Delete Task?',text:'This action cannot be undone.',icon:'warning',showCancelButton:true,confirmButtonColor:'var(--error)',confirmButtonText:'Yes, delete it!'}).then(async(result)=>{if(result.isConfirmed){Swal.fire({title:'Deleting...',didOpen:()=>Swal.showLoading()});try{await api(`/delete-task?task_id=${taskId}`,{method:'DELETE'});Swal.close();showToast('Task deleted successfully','success');await loadTasks(paginationState.tasks.page)}catch(error){Swal.fire('Error',error.message,'error')}}})};function showTaskCreator(){document.getElementById('seoTaskCreator').classList.add('active');currentData.currentStep=1;currentData.selectedKeywords=[];currentData.taskPriority='standard';updateTaskCreatorStep()};function closeTaskCreator(){document.getElementById('seoTaskCreator').classList.remove('active')};function updateTaskCreatorStep(){const steps=['urlKeywords','priority','budget','review'];steps.forEach((step,index)=>{const stepNum=index+1;const stepEl=document.querySelector(`.progress-step[data-step="${stepNum}"]`);const contentEl=document.getElementById(`step${stepNum}`);if(stepNum<currentData.currentStep){stepEl.classList.add('completed');stepEl.classList.remove('active')}else if(stepNum===currentData.currentStep){stepEl.classList.add('active');stepEl.classList.remove('completed');contentEl.classList.add('active')}else{stepEl.classList.remove('completed','active')}contentEl.classList.toggle('active',stepNum===currentData.currentStep)});document.getElementById('prevStepBtn').style.display=currentData.currentStep===1?'none':'block';const nextBtn=document.getElementById('nextStepBtn');if(currentData.currentStep===4){nextBtn.textContent='Create Task';nextBtn.innerHTML='<i class="ri-check-line"></i> Create Task'}else{nextBtn.textContent='Next Step';nextBtn.innerHTML='Next Step <i class="ri-arrow-right-line"></i>'}};function nextStep(){if(currentData.currentStep<4){currentData.currentStep++;updateTaskCreatorStep();updateReviewStep()}else{createTask()}};function prevStep(){if(currentData.currentStep>1){currentData.currentStep--;updateTaskCreatorStep()}};function selectPriority(priority){currentData.taskPriority=priority;document.querySelectorAll('.priority-option').forEach(opt=>{opt.classList.toggle('selected',opt.dataset.priority===priority)})};function toggleKeyword(keyword){const index=currentData.selectedKeywords.indexOf(keyword);if(index>-1){currentData.selectedKeywords.splice(index,1)}else{currentData.selectedKeywords.push(keyword)}updateSelectedKeywords()};function updateSelectedKeywords(){const container=document.getElementById('selectedKeywordsList');if(currentData.selectedKeywords.length===0){container.innerHTML='<p style="color: var(--text-secondary); text-align: center;">No keywords selected</p>';return}container.innerHTML=currentData.selectedKeywords.map(kw=>`<div class="keyword-tag"><span class="keyword-tag-text">${kw}</span><span class="keyword-tag-remove" onclick="toggleKeyword('${kw}')">×</span></div>`).join('')};function updateBudgetCalculation(){const clicks=parseFloat(document.getElementById('estimatedClicks').value)||0;const cpc=0.35;const dailyCost=clicks*cpc;const monthlyCost=dailyCost*30;const yearlyCost=dailyCost*365;document.getElementById('dailyAmount').textContent=`$${dailyCost.toFixed(2)}`;document.getElementById('monthlyAmount').textContent=`$${monthlyCost.toFixed(2)}`;document.getElementById('yearlyAmount').textContent=`$${yearlyCost.toFixed(2)}`};function updateReviewStep(){const url=document.getElementById('taskUrl').value;const priority=currentData.taskPriority;const keywords=currentData.selectedKeywords;const budget=parseFloat(document.getElementById('estimatedClicks').value)*0.35||0;document.getElementById('reviewUrl').textContent=url;document.getElementById('reviewPriority').textContent=priority.charAt(0).toUpperCase()+priority.slice(1);document.getElementById('reviewKeywords').textContent=keywords.join(', ')||'None';document.getElementById('reviewBudget').textContent=`$${budget.toFixed(2)}`};async function createTask(){const url=document.getElementById('taskUrl').value;const keywords=currentData.selectedKeywords;const priority=currentData.taskPriority;const clicks=parseFloat(document.getElementById('estimatedClicks').value)||0;const budget=clicks*0.35;const paymentMethod=document.querySelector('input[name="paymentMethod"]:checked').value;if(!url||keywords.length===0||budget<10){showToast('Please complete all required fields','error');return}Swal.fire({title:'Creating Task...',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});try{const data=await api('/add-task',{method:'POST',body:JSON.stringify({url,keywords,priority,budget,payment_method:paymentMethod})});if(data.payment_url){window.location.href=data.payment_url}else{closeTaskCreator();showToast('Task created successfully!','success');await loadTasks()}}catch(error){Swal.fire('Error',error.message,'error')}}
async function loadImages(page=1){try{const data=await api(`/images/dashboard?page=${page}&page_size=20`);currentData.images=data.images||[];paginationState.images={page,pageSize:20,total:data.total||0,hasNext:data.has_next||false};document.getElementById('content').innerHTML=renderImagesContent()}catch(error){showToast('Failed to load images','error')}};function renderImagesContent(){return`<div class="card"><div class="card-header"><h2 class="card-title">Image Hosting</h2><button class="btn btn-primary" onclick="uploadImages()"><i class="ri-upload-line"></i> Upload Images</button></div><div class="card-body">${renderImagesGrid(currentData.images)}${renderPagination('images')}</div></div>`};function renderImagesGrid(images){if(!images||images.length===0){return`<div class="empty-state"><div class="empty-state-icon"><i class="ri-image-line"></i></div><div class="empty-state-title">No images yet</div><div class="empty-state-description">Upload your first image to get started</div><button class="btn btn-primary" onclick="uploadImages()"><i class="ri-upload-line"></i> Upload Images</button></div>`}return`<div class="media-grid">${images.map(img=>renderImageCard(img)).join('')}</div>`};function renderImageCard(img){return`<div class="media-card" onclick="viewImageDetails('${img._id}')"><div class="media-preview"><img src="${img.url}" alt="${img.filename}"></div><div class="media-info"><div class="media-filename">${img.filename}</div><div class="media-stats"><span><i class="ri-eye-line"></i> ${formatNumber(img.views||0)}</span><span>${(img.size/1024).toFixed(2)} KB</span></div><button class="btn btn-danger btn-sm" onclick="event.stopPropagation(); deleteImage('${img._id}')"><i class="ri-delete-bin-line"></i> Delete</button></div></div>`};async function uploadImages(){const{value:files}=await Swal.fire({title:'Upload Images',html:'<input type="file" id="imageFiles" class="form-input" accept="image/*" multiple>',showCancelButton:true,confirmButtonText:'Upload',preConfirm:()=>{const input=document.getElementById('imageFiles');if(!input.files||input.files.length===0){Swal.showValidationMessage('Please select at least one image');return false}if(input.files.length>10){Swal.showValidationMessage('Maximum 10 images at once');return false}return input.files}});if(files){Swal.fire({title:'Uploading...',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});try{const formData=new FormData();Array.from(files).forEach(file=>formData.append('files',file));const response=await fetch(`${API_BASE}/images/upload`,{method:'POST',headers:{'Session-Token':sessionToken},body:formData});const data=await response.json();if(!response.ok)throw new Error(data.error?.message||'Upload failed');Swal.close();showToast('Images uploaded successfully!','success');await loadImages()}catch(error){Swal.fire('Error',error.message,'error')}}};async function viewImageDetails(imageId){const img=currentData.images.find(i=>i._id===imageId);if(!img)return;Swal.fire({title:'Image Details',html:`<div class="card"><div class="card-body"><div style="text-align: center; margin-bottom: 1.5rem;"><img src="${img.url}" style="max-width: 100%; max-height: 400px; border-radius: var(--radius);"></div><div style="margin-bottom: 1rem;"><strong>Filename:</strong> ${img.filename}</div><div style="margin-bottom: 1rem;"><strong>CDN URL:</strong><br><input type="text" class="form-input" value="${img.url}" readonly onclick="this.select()"></div><div style="margin-bottom: 1rem;"><strong>Total Views:</strong> ${formatNumber(img.views||0)}</div><div style="margin-bottom: 1rem;"><strong>Size:</strong> ${(img.size/1024).toFixed(2)} KB</div></div></div>`,width:'95vw',confirmButtonText:'Close'})};async function deleteImage(imageId){Swal.fire({title:'Delete Image?',text:'This will remove the image from CDN and break any links using it.',icon:'warning',showCancelButton:true,confirmButtonColor:'var(--error)',confirmButtonText:'Yes, delete it!'}).then(async(result)=>{if(result.isConfirmed){Swal.fire({title:'Deleting...',didOpen:()=>Swal.showLoading()});try{await api(`/images/delete?image_id=${imageId}`,{method:'DELETE'});Swal.close();showToast('Image deleted successfully','success');await loadImages(paginationState.images.page)}catch(error){Swal.fire('Error',error.message,'error')}}})};async function loadArticles(page=1){try{const data=await api(`/users/dashboard?page=1&page_size=10`);currentData.articles=data.articles||[];currentData.domains=data.domains||[];paginationState.articles={page,pageSize:10,total:data.articles_total||0,hasNext:data.articles_has_next||false};document.getElementById('content').innerHTML=renderArticlesContent()}catch(error){showToast('Failed to load articles','error')}};function renderArticlesContent(){return`<div style="display: flex; flex-direction: column; gap: 1.5rem;" class="domains-usage-container"><div class="card" style="flex: 2;"><div class="card-header collapsible-header" onclick="toggleSection('domainsContent')"><h2 class="card-title">Verified Domains</h2><div style="display: flex; align-items: center; gap: 1rem;"><i id="domainsContentIcon" class="ri-arrow-down-s-line" style="font-size: 1.5rem; transition: transform 0.3s; display: none;"></i><button class="btn btn-primary btn-sm" onclick="event.stopPropagation(); addDomain()"><i class="ri-add-line"></i> Add Domain</button></div></div><div id="domainsContent" class="card-body collapsible-content">${renderDomainsGrid(currentData.domains)}</div></div><div class="card" style="flex: 1;"><div class="card-header collapsible-header" onclick="toggleSection('usageContent')"><h2 class="card-title">Usage & Limits</h2><i id="usageContentIcon" class="ri-arrow-down-s-line" style="font-size: 1.5rem; transition: transform 0.3s; display: none;"></i></div><div id="usageContent" class="card-body collapsible-content">${renderUsageInfo()}</div></div></div><div class="card"><div class="card-header"><h2 class="card-title">Published Articles</h2><button class="btn btn-primary" onclick="createArticle()"><i class="ri-add-line"></i> New Article</button></div><div class="card-body">${renderArticlesGrid(currentData.articles)}${renderPagination('articles')}</div></div>`};function renderDomainsGrid(domains){if(!domains||domains.length===0){return`<div class="empty-state"><div class="empty-state-icon"><i class="ri-global-line"></i></div><div class="empty-state-title">No domains yet</div><div class="empty-state-description">Add and verify a domain to start publishing articles</div><button class="btn btn-primary" onclick="addDomain()"><i class="ri-add-line"></i> Add Domain</button></div>`}return domains.map(domain=>{const statusBadge=domain.verified?'<span class="badge badge-success domain-status-badge">Verified</span>':'<span class="badge badge-warning domain-status-badge">Pending</span>';return`<div class="domain-item"><div class="domain-url-row"><div class="domain-url-text">${domain.domain}</div></div><div class="domain-actions-row"><div class="domain-status-row">${statusBadge}<div class="domain-verify-delete"><button class="btn btn-sm btn-danger btn-delete-domain" onclick="deleteDomain('${domain._id}')"><i class="ri-delete-bin-line"></i><span class="btn-delete-text">Delete</span></button></div></div><div class="domain-buttons-row"><button class="btn btn-sm btn-secondary btn-verify-instructions" onclick="showVerificationInstructions('${domain.domain}','${domain.verification_code}')"><i class="ri-information-line"></i>Instructions</button>${!domain.verified?`<button class="btn btn-sm btn-primary btn-verify-domain" onclick="verifyDomain('${domain._id}')"><i class="ri-check-line"></i>Verify</button>`:''}<div class="domain-verify-delete-desktop">${!domain.verified?`<button class="btn btn-sm btn-primary btn-verify-domain" onclick="verifyDomain('${domain._id}')"><i class="ri-check-line"></i>Verify</button>`:''}<button class="btn btn-sm btn-danger btn-delete-domain" onclick="deleteDomain('${domain._id}')"><i class="ri-delete-bin-line"></i><span class="btn-delete-text">Delete</span></button></div></div></div></div>`}).join('')};function renderUsageInfo(){const plan=currentData.plan||{plan_name:'Basic',articles_limit:10,domains_limit:1,monthly_price:0};const usage=currentData.usage||{articles:0,domains:0};return`<div style="display: flex; flex-direction: column; gap: 1rem;"><div class="usage-category"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;"><span style="display: flex; align-items: center; gap: 0.5rem;"><i class="ri-article-line" style="font-size: 1.25rem; color: var(--primary);"></i><strong>Articles</strong></span><span style="font-size: 1.125rem; font-weight: 600;">${usage.articles||0} / ${plan.articles_limit}</span></div><div class="progress-bar"><div class="progress-fill" style="width: ${((usage.articles||0)/plan.articles_limit)*100}%; background: var(--primary);"></div></div></div><div class="usage-category"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;"><span style="display: flex; align-items: center; gap: 0.5rem;"><i class="ri-global-line" style="font-size: 1.25rem; color: var(--success);"></i><strong>Domains</strong></span><span style="font-size: 1.125rem; font-weight: 600;">${usage.domains||0} / ${plan.domains_limit}</span></div><div class="progress-bar"><div class="progress-fill" style="width: ${((usage.domains||0)/plan.domains_limit)*100}%; background: var(--success);"></div></div></div><div class="usage-category" style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius);"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;"><strong>Current Plan</strong><span class="badge badge-primary">${plan.plan_name}</span></div><div style="color: var(--text-secondary); font-size: 0.875rem;">$${plan.monthly_price}/month</div><button class="btn btn-primary btn-sm" onclick="upgradePlan()" style="width: 100%; margin-top: 0.75rem;"><i class="ri-vip-crown-line"></i> Upgrade Plan</button></div></div>`};function renderArticlesGrid(articles){if(!articles||articles.length===0){return`<div class="empty-state"><div class="empty-state-icon"><i class="ri-article-line"></i></div><div class="empty-state-title">No articles yet</div><div class="empty-state-description">Create your first article to get started</div><button class="btn btn-primary" onclick="createArticle()"><i class="ri-add-line"></i> Create Article</button></div>`}return`<div class="task-grid">${articles.map(article=>renderArticleCard(article)).join('')}</div>`};function renderArticleCard(article){return`<div class="task-card" onclick="viewArticleDetails('${article._id}')"><div class="task-header" style="display: flex; flex-direction: column; align-items: flex-start; gap: 0.5rem;" class="mobilearticle1"><div style="font-weight: 600; color: var(--text); word-break: break-word;">${article.title}</div><span class="badge badge-primary">${article.domain}</span></div><div class="task-stats mobilearticle2"><div class="task-stat"><div class="task-stat-label">Views</div><div class="task-stat-value">${formatNumber(article.views||0)}</div></div><div class="task-stat"><div class="task-stat-label">Published</div><div class="task-stat-value">${new Date(article.created_at).toLocaleDateString()}</div></div></div><div class="task-actions" onclick="event.stopPropagation()"><button class="btn btn-secondary btn-sm" onclick="editArticle('${article._id}')"><i class="ri-edit-line"></i> Edit</button><button class="btn btn-danger btn-sm" onclick="deleteArticle('${article._id}')"><i class="ri-delete-bin-line"></i></button></div></div>`};async function addDomain(){const{value:domain}=await Swal.fire({title:'Add Domain',html:'<input type="text" id="domainInput" class="form-input" placeholder="example.com">',showCancelButton:true,confirmButtonText:'Add',preConfirm:()=>{const val=document.getElementById('domainInput').value;if(!val){Swal.showValidationMessage('Please enter a domain');return false}return val}});if(domain){Swal.fire({title:'Adding Domain...',didOpen:()=>Swal.showLoading()});try{const data=await api('/add-domain',{method:'POST',body:JSON.stringify({domain})});Swal.close();showToast('Domain added! Please verify it.','success');await loadArticles()}catch(error){Swal.fire('Error',error.message,'error')}}};function showVerificationInstructions(domain,code){Swal.fire({title:'Domain Verification',html:`<div class="card"><div class="card-body"><p style="margin-bottom: 1rem;">Add this TXT record to your DNS settings:</p><div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem;"><div style="margin-bottom: 0.5rem;"><strong>Type:</strong> TXT</div><div style="margin-bottom: 0.5rem;"><strong>Name:</strong> @</div><div><strong>Value:</strong><br><code style="background: var(--bg-secondary); padding: 0.5rem; border-radius: var(--radius-sm); display: block; word-break: break-all; margin-top: 0.5rem; border: 1px solid var(--border);">${code}</code></div></div><p style="color: var(--text-secondary); font-size: 0.875rem;">DNS changes may take up to 48 hours to propagate. Click "Verify" once you've added the TXT record.</p></div></div>`,width:'95vw',confirmButtonText:'Got it'})};async function verifyDomain(domainId){Swal.fire({title:'Verifying Domain...',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});try{const data=await api(`/verify-domain?domain_id=${domainId}`);Swal.close();if(data.verified){showToast('Domain verified successfully!','success');await loadArticles()}else{showToast('Verification failed. Please check your DNS settings.','error')}}catch(error){Swal.fire('Error',error.message,'error')}};async function deleteDomain(domainId){Swal.fire({title:'Delete Domain?',text:'Articles on this domain will no longer be accessible.',icon:'warning',showCancelButton:true,confirmButtonColor:'var(--error)',confirmButtonText:'Yes, delete it!'}).then(async(result)=>{if(result.isConfirmed){Swal.fire({title:'Deleting...',didOpen:()=>Swal.showLoading()});try{await api(`/delete-domain?domain_id=${domainId}`,{method:'DELETE'});Swal.close();showToast('Domain deleted successfully','success');await loadArticles()}catch(error){Swal.fire('Error',error.message,'error')}}})};async function createArticle(){if(!currentData.domains||currentData.domains.filter(d=>d.verified).length===0){showToast('Please add and verify a domain first','error');return}Swal.fire({title:'Create Article',html:`<div class="card"><div class="card-body"><div class="form-group"><label class="form-label">Domain</label><select id="articleDomain" class="form-select">${currentData.domains.filter(d=>d.verified).map(d=>`<option value="${d.domain}">${d.domain}</option>`).join('')}</select></div><div class="form-group"><label class="form-label">Title</label><input type="text" id="articleTitle" class="form-input" placeholder="Article title"></div><div class="form-group"><label class="form-label">Content</label><textarea id="articleContent" class="form-textarea" rows="10" placeholder="Article content in HTML"></textarea></div></div></div>`,width:'95vw',showCancelButton:true,confirmButtonText:'Publish',preConfirm:()=>{const domain=document.getElementById('articleDomain').value;const title=document.getElementById('articleTitle').value;const content=document.getElementById('articleContent').value;if(!domain||!title||!content){Swal.showValidationMessage('All fields are required');return false}return{domain,title,content}}}).then(async(result)=>{if(result.isConfirmed){const{domain,title,content}=result.value;Swal.fire({title:'Publishing...',didOpen:()=>Swal.showLoading()});try{await api('/add-article',{method:'POST',body:JSON.stringify({domain,title,content})});Swal.close();showToast('Article published successfully!','success');await loadArticles()}catch(error){Swal.fire('Error',error.message,'error')}}})};async function editArticle(articleId){const article=currentData.articles.find(a=>a._id===articleId);if(!article)return;Swal.fire({title:'Edit Article',html:`<div class="card"><div class="card-body"><div class="form-group"><label class="form-label">Title</label><input type="text" id="editArticleTitle" class="form-input" value="${article.title}"></div><div class="form-group"><label class="form-label">Content</label><textarea id="editArticleContent" class="form-textarea" rows="10">${article.content||''}</textarea></div></div></div>`,width:'95vw',showCancelButton:true,confirmButtonText:'Update',preConfirm:()=>{const title=document.getElementById('editArticleTitle').value;const content=document.getElementById('editArticleContent').value;if(!title||!content){Swal.showValidationMessage('All fields are required');return false}return{title,content}}}).then(async(result)=>{if(result.isConfirmed){const{title,content}=result.value;Swal.fire({title:'Updating...',didOpen:()=>Swal.showLoading()});try{await api(`/edit-article/${articleId}`,{method:'PUT',body:JSON.stringify({title,content})});Swal.close();showToast('Article updated successfully!','success');await loadArticles()}catch(error){Swal.fire('Error',error.message,'error')}}})};async function deleteArticle(articleId){Swal.fire({title:'Delete Article?',text:'This action cannot be undone.',icon:'warning',showCancelButton:true,confirmButtonColor:'var(--error)',confirmButtonText:'Yes, delete it!'}).then(async(result)=>{if(result.isConfirmed){Swal.fire({title:'Deleting...',didOpen:()=>Swal.showLoading()});try{await api(`/delete-article/${articleId}`,{method:'DELETE'});Swal.close();showToast('Article deleted successfully','success');await loadArticles()}catch(error){Swal.fire('Error',error.message,'error')}}})};function viewArticleDetails(articleId){const article=currentData.articles.find(a=>a._id===articleId);if(!article)return;window.open(`https://${article.domain}/article/${article.slug}`,'_blank')}
async function loadBilling(page=1){try{const data=await api(`/dashboard/billings?page=${page}&page_size=10`);currentData.billing=data.transactions||[];paginationState.billing={page,pageSize:10,total:data.total||0,hasNext:data.has_next||false};document.getElementById('content').innerHTML=renderBillingContent()}catch(error){showToast('Failed to load billing','error')}};function renderBillingContent(){return`<div class="card"><div class="card-header"><h2 class="card-title">Billing History</h2></div><div class="card-body">${renderBillingTable(currentData.billing)}${renderPagination('billing')}</div></div>`};function renderBillingTable(transactions){if(!transactions||transactions.length===0){return`<div class="empty-state"><div class="empty-state-icon"><i class="ri-bill-line"></i></div><div class="empty-state-title">No transactions yet</div><div class="empty-state-description">Your billing history will appear here</div></div>`}return`<div class="table-container"><table><thead><tr><th>Date</th><th>Description</th><th>Amount</th><th>Status</th><th>Action</th></tr></thead><tbody>${transactions.map(t=>`<tr><td>${new Date(t.created_at).toLocaleDateString()}</td><td>${t.description||'Payment'}</td><td>$${t.amount.toFixed(2)}</td><td><span class="badge ${t.status==='completed'?'badge-success':(t.status==='pending'?'badge-warning':'badge-danger')}">${t.status}</span></td><td><button class="btn btn-sm btn-secondary" onclick="viewPaymentDetails('${t.payment_id}')"><i class="ri-eye-line"></i> View</button></td></tr>`).join('')}</tbody></table></div>`};async function viewPaymentDetails(paymentId){try{const data=await api(`/get-payment-status?payment_id=${paymentId}`);const payment=data.payment;Swal.fire({title:'Payment Details',html:`<div class="card"><div class="card-body"><div style="text-align: center; margin-bottom: 1.5rem;"><i class="ri-bill-line" style="font-size: 4rem; color: var(--primary);"></i></div><div style="margin-bottom: 1rem;"><strong>Payment ID:</strong> ${payment.payment_id}</div><div style="margin-bottom: 1rem;"><strong>Amount:</strong> $${payment.amount.toFixed(2)}</div><div style="margin-bottom: 1rem;"><strong>Status:</strong> <span class="badge ${payment.status==='completed'?'badge-success':(payment.status==='pending'?'badge-warning':'badge-danger')}">${payment.status}</span></div><div style="margin-bottom: 1rem;"><strong>Date:</strong> ${new Date(payment.created_at).toLocaleString()}</div>${payment.checkout_url?`<a href="${payment.checkout_url}" target="_blank" class="btn btn-primary" style="width: 100%;"><i class="ri-external-link-line"></i> Complete Payment</a>`:''}</div></div>`,width:'95vw',confirmButtonText:'Close'})}catch(error){showToast('Failed to load payment details','error')}};async function upgradePlan(){Swal.fire({title:'Upgrade Hosting Plan',html:`<div class="card"><div class="card-body"><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;"><div class="plan-option" data-plan="professional"><div style="text-align: center; padding: 1.5rem; border: 2px solid var(--border); border-radius: var(--radius); cursor: pointer; transition: var(--transition);" onclick="selectPlan(this, 'professional')"><h3>Professional</h3><div style="font-size: 2rem; font-weight: 700; color: var(--primary); margin: 1rem 0;">$29/mo</div><ul style="list-style: none; padding: 0; text-align: left;"><li>✓ 100 Articles</li><li>✓ 5 Domains</li><li>✓ Priority Support</li></ul></div></div><div class="plan-option" data-plan="enterprise"><div style="text-align: center; padding: 1.5rem; border: 2px solid var(--border); border-radius: var(--radius); cursor: pointer; transition: var(--transition);" onclick="selectPlan(this, 'enterprise')"><h3>Enterprise</h3><div style="font-size: 2rem; font-weight: 700; color: var(--primary); margin: 1rem 0;">$99/mo</div><ul style="list-style: none; padding: 0; text-align: left;"><li>✓ Unlimited Articles</li><li>✓ Unlimited Domains</li><li>✓ 24/7 Support</li></ul></div></div></div></div></div>`,width:'95vw',showCancelButton:true,confirmButtonText:'Subscribe',preConfirm:()=>{const selected=document.querySelector('.plan-option div[style*="border-color: var(--primary)"]');if(!selected){Swal.showValidationMessage('Please select a plan');return false}return selected.parentElement.dataset.plan}}).then(async(result)=>{if(result.isConfirmed){const plan=result.value;Swal.fire({title:'Processing...',didOpen:()=>Swal.showLoading()});try{const data=await api('/hosting/buy-package',{method:'POST',body:JSON.stringify({package_name:plan})});if(data.payment_url){window.location.href=data.payment_url}else{showToast('Subscription created!','success')}}catch(error){Swal.fire('Error',error.message,'error')}}})};function selectPlan(element,plan){document.querySelectorAll('.plan-option div').forEach(el=>{el.style.borderColor='var(--border)'});element.style.borderColor='var(--primary)'};async function loadProfile(){try{const data=await api('/users/dashboard?page=1&page_size=1');currentData.user=data.user;document.getElementById('content').innerHTML=renderProfileContent()}catch(error){showToast('Failed to load profile','error')}};function renderProfileContent(){const user=currentData.user||{};return`<div class="card"><div class="card-header"><h2 class="card-title">Profile Settings</h2></div><div class="card-body"><div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" value="${user.email||''}" readonly></div><div class="form-group"><label class="form-label">Account Created</label><input type="text" class="form-input" value="${user.created_at?new Date(user.created_at).toLocaleDateString():'N/A'}" readonly></div><button class="btn btn-primary" onclick="showSessionsModal()"><i class="ri-shield-line"></i> Manage Sessions</button><button class="btn btn-danger" onclick="logout()" style="margin-left: 1rem;"><i class="ri-logout-box-r-line"></i> Logout</button></div></div>`};async function logout(){Swal.fire({title:'Logout?',text:'You will be signed out from this device.',icon:'question',showCancelButton:true,confirmButtonText:'Yes, logout'}).then(async(result)=>{if(result.isConfirmed){try{await api('/logout');document.cookie='session_token=; path=/; Domain=.seotize.net; Secure; SameSite=Lax; expires=Thu, 01 Jan 1970 00:00:00 GMT';localStorage.removeItem('authToken');window.location.href='/login.html'}catch(error){document.cookie='session_token=; path=/; Domain=.seotize.net; Secure; SameSite=Lax; expires=Thu, 01 Jan 1970 00:00:00 GMT';localStorage.removeItem('authToken');window.location.href='/login.html'}}})};function getCookie(name){const value=`; ${document.cookie}`;const parts=value.split(`; ${name}=`);if(parts.length===2)return parts.pop().split(';').shift()};function showToast(message,type='info'){Swal.fire({toast:true,position:'top-end',icon:type,title:message,showConfirmButton:false,timer:3000,timerProgressBar:true})};function closeModal(){document.getElementById('modalOverlay').classList.remove('active')}
</script>
</head>
<body data-theme="light">
<div class="dashboard-layout">
<aside class="sidebar">
<div class="sidebar-header">
<a href="#" class="logo"><i class="ri-line-chart-line"></i> SEOTIZE</a>
</div>
<nav class="sidebar-nav">
<div class="nav-section">
<div class="nav-section-title">Main</div>
<a href="#" class="nav-item active" data-page="dashboard"><i class="ri-dashboard-line"></i> Dashboard</a>
<a href="#" class="nav-item" data-page="tasks"><i class="ri-task-line"></i> SEO Tasks</a>
<a href="#" class="nav-item" data-page="images"><i class="ri-image-line"></i> Image Hosting</a>
<a href="#" class="nav-item" data-page="articles"><i class="ri-article-line"></i> Articles</a>
</div>
<div class="nav-section">
<div class="nav-section-title">Account</div>
<a href="#" class="nav-item" data-page="billing"><i class="ri-bill-line"></i> Billing</a>
<a href="#" class="nav-item" data-page="profile"><i class="ri-user-line"></i> Profile</a>
</div>
</nav>
</aside>
<main class="main-content">
<header class="header">
<div class="header-left">
<button class="mobile-search-toggle" onclick="toggleMobileSearch()"><i class="ri-search-line"></i></button>
<div class="search-bar">
<i class="ri-search-line"></i>
<input type="text" placeholder="Search...">
</div>
</div>
<div class="header-right">
<button class="theme-toggle" onclick="toggleTheme()"><i id="themeIcon" class="ri-moon-line"></i></button>
<div class="user-menu-container">
<div class="user-menu" onclick="toggleUserDropdown()">
<div class="user-avatar" id="userInitial">U</div>
<div>
<div style="font-weight: 600; font-size: 0.875rem;" id="userName">User</div>
<div style="font-size: 0.75rem; color: var(--text-secondary);" id="userEmail">user@example.com</div>
</div>
<i class="ri-arrow-down-s-line"></i>
</div>
<div class="user-dropdown" id="userDropdown">
<a href="#" class="user-dropdown-item" data-page="profile"><i class="ri-user-line"></i> Profile</a>
<a href="#" class="user-dropdown-item" onclick="showSessionsModal(); return false;"><i class="ri-shield-line"></i> Sessions (<span id="sessionCount">1</span>)</a>
<a href="#" class="user-dropdown-item danger" onclick="logout(); return false;"><i class="ri-logout-box-r-line"></i> Logout</a>
</div>
</div>
<button class="mobile-profile-menu hidedesktop" onclick="toggleMobileProfileDropdown(event)"><div class="user-avatar" id="mobileUserAvatar">U</div></button>
</div>
</header>
<div class="content" id="content"></div>
</main>
</div>
<div class="mobile-nav">
<div class="mobile-nav-items">
<a href="#" class="mobile-nav-item active" data-page="dashboard"><i class="ri-dashboard-line"></i><span>Dashboard</span></a>
<a href="#" class="mobile-nav-item" data-page="tasks"><i class="ri-task-line"></i><span>Tasks</span></a>
<a href="#" class="mobile-nav-item" data-page="images"><i class="ri-image-line"></i><span>Images</span></a>
<a href="#" class="mobile-nav-item" data-page="articles"><i class="ri-article-line"></i><span>Articles</span></a>
<a href="#" class="mobile-nav-item" data-page="billing"><i class="ri-bill-line"></i><span>Billing</span></a>
</div>
</div>
<div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
<div class="mobile-menu" id="mobileMenu">
<div class="mobile-menu-header">
<div style="display: flex; align-items: center; gap: 1rem;">
<div class="user-avatar" id="mobileMenuUserInitial">U</div>
<div>
<div style="font-weight: 600;" id="mobileMenuUserName">User</div>
<div style="font-size: 0.875rem; opacity: 0.9;" id="mobileMenuUserEmail">user@example.com</div>
</div>
</div>
</div>
<div class="mobile-menu-content">
<div class="nav-section">
<div class="nav-section-title">Quick Stats</div>
<div style="padding: 0.75rem; background: var(--bg-secondary); border-radius: var(--radius); margin-bottom: 0.5rem;">
<div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;"><span>Tasks</span><strong id="mobileMenuTaskCount">0</strong></div>
<div style="display: flex; justify-content: space-between;"><span>Articles</span><strong id="mobileMenuArticleCount">0</strong></div>
</div>
</div>
<div class="nav-section">
<div class="nav-section-title">Navigation</div>
<a href="#" class="nav-item" data-page="dashboard"><i class="ri-dashboard-line"></i> Dashboard</a>
<a href="#" class="nav-item" data-page="tasks"><i class="ri-task-line"></i> SEO Tasks</a>
<a href="#" class="nav-item" data-page="images"><i class="ri-image-line"></i> Image Hosting</a>
<a href="#" class="nav-item" data-page="articles"><i class="ri-article-line"></i> Articles</a>
<a href="#" class="nav-item" data-page="billing"><i class="ri-bill-line"></i> Billing</a>
<a href="#" class="nav-item" data-page="profile"><i class="ri-user-line"></i> Profile</a>
</div>
<div class="nav-section">
<div class="nav-section-title">Account</div>
<a href="#" class="nav-item" onclick="showSessionsModal(); return false;"><i class="ri-shield-line"></i> Active Sessions (<span id="sessionCountMobile">1</span>)</a>
<a href="#" class="nav-item danger" onclick="logout(); return false;"><i class="ri-logout-box-r-line"></i> Logout</a>
</div>
</div>
</div>
<div class="mobile-search-overlay" id="mobileSearchOverlay">
<input type="text" class="mobile-search-input" placeholder="Search...">
</div>
<div class="mobile-profile-dropdown" id="mobileProfileDropdown">
<div class="user-dropdown-item" style="border-bottom: 1px solid var(--border); padding: 1rem;">
<div style="display: flex; align-items: center; gap: 0.75rem;">
<div class="user-avatar" id="mobileDropdownUserInitial">U</div>
<div style="flex: 1;">
<div style="font-weight: 600; font-size: 0.9rem;" id="mobileDropdownUserName">User</div>
<div style="font-size: 0.8rem; color: var(--text-secondary);" id="mobileDropdownUserEmail">user@example.com</div>
</div>
</div>
</div>
<a href="#" class="user-dropdown-item" data-page="profile" onclick="closeMobileProfileDropdown(); navigateTo('profile'); return false;"><i class="ri-user-line"></i> Profile</a>
<a href="#" class="user-dropdown-item" onclick="closeMobileProfileDropdown(); showSessionsModal(); return false;"><i class="ri-shield-line"></i> Sessions (<span id="mobileDropdownSessionCount">1</span>)</a>
<a href="#" class="user-dropdown-item danger" onclick="closeMobileProfileDropdown(); logout(); return false;"><i class="ri-logout-box-r-line"></i> Logout</a>
</div>
<div class="modal-overlay" id="modalOverlay">
<div class="modal" id="modal">
<div class="modal-header">
<h3 class="modal-title" id="modalTitle">Modal</h3>
<button class="modal-close" onclick="closeModal()"><i class="ri-close-line"></i></button>
</div>
<div class="modal-body" id="modalBody"></div>
</div>
</div>
<div class="seo-task-creator" id="seoTaskCreator">
<div class="task-creator-container">
<div class="task-creator-sidebar">
<div class="progress-steps">
<div class="progress-step active" data-step="1">
<div class="step-indicator">1</div>
<div class="step-info">
<div class="step-title">URL & Keywords</div>
<div class="step-description">Basic information</div>
</div>
</div>
<div class="progress-step" data-step="2">
<div class="step-indicator">2</div>
<div class="step-info">
<div class="step-title">Priority</div>
<div class="step-description">Choose plan</div>
</div>
</div>
<div class="progress-step" data-step="3">
<div class="step-indicator">3</div>
<div class="step-info">
<div class="step-title">Budget</div>
<div class="step-description">Set budget</div>
</div>
</div>
<div class="progress-step" data-step="4">
<div class="step-indicator">4</div>
<div class="step-info">
<div class="step-title">Review</div>
<div class="step-description">Confirm & pay</div>
</div>
</div>
</div>
</div>
<div class="task-creator-main">
<div class="task-creator-header">
<h2 class="task-creator-title">Create SEO Task</h2>
<p class="task-creator-subtitle">Boost your website's visibility with automated SEO</p>
<button class="task-creator-close" onclick="closeTaskCreator()"><i class="ri-close-line"></i></button>
</div>
<div class="task-creator-body">
<div class="step-content active" id="step1">
<div class="form-group">
<label class="form-label">Website URL</label>
<input type="url" id="taskUrl" class="form-input" placeholder="https://example.com">
</div>
<div class="form-group">
<label class="form-label">Keywords (select at least 3)</label>
<div class="keyword-suggestions">
<div class="keyword-suggestion" onclick="toggleKeyword('SEO')">SEO</div>
<div class="keyword-suggestion" onclick="toggleKeyword('Marketing')">Marketing</div>
<div class="keyword-suggestion" onclick="toggleKeyword('Business')">Business</div>
<div class="keyword-suggestion" onclick="toggleKeyword('Technology')">Technology</div>
<div class="keyword-suggestion" onclick="toggleKeyword('Innovation')">Innovation</div>
</div>
<div class="selected-keywords">
<div id="selectedKeywordsList"><p style="color: var(--text-secondary); text-align: center;">No keywords selected</p></div>
</div>
</div>
</div>
<div class="step-content" id="step2">
<h3 style="margin-bottom: 1.5rem;">Choose Your Priority Level</h3>
<div class="priority-options">
<div class="priority-option" data-priority="basic" onclick="selectPriority('basic')">
<div class="priority-badge">Basic</div>
<div class="priority-title">Starter Plan</div>
<div class="priority-price">$0.20<small>/click</small></div>
<div class="priority-locations">Basic targeting</div>
</div>
<div class="priority-option selected" data-priority="standard" onclick="selectPriority('standard')">
<div class="priority-badge">Standard</div>
<div class="priority-title">Popular Choice</div>
<div class="priority-price">$0.35<small>/click</small></div>
<div class="priority-locations">Advanced targeting</div>
</div>
<div class="priority-option" data-priority="premium" onclick="selectPriority('premium')">
<div class="priority-badge">Premium</div>
<div class="priority-title">Maximum Impact</div>
<div class="priority-price">$0.50<small>/click</small></div>
<div class="priority-locations">Premium locations</div>
</div>
</div>
</div>
<div class="step-content" id="step3">
<h3 style="margin-bottom: 1.5rem;">Set Your Budget</h3>
<div class="budget-calculator">
<div class="budget-input-group">
<div class="budget-field">
<label>Estimated Daily Clicks</label>
<div class="currency-symbol">#</div>
<input type="number" id="estimatedClicks" min="30" value="100" onchange="updateBudgetCalculation()">
</div>
</div>
<div class="budget-summary">
<div class="budget-summary-item">
<div class="budget-summary-label">Daily</div>
<div class="budget-summary-value" id="dailyAmount">$35.00</div>
</div>
<div class="budget-summary-item">
<div class="budget-summary-label">Monthly</div>
<div class="budget-summary-value" id="monthlyAmount">$1,050.00</div>
</div>
<div class="budget-summary-item">
<div class="budget-summary-label">Yearly</div>
<div class="budget-summary-value" id="yearlyAmount">$12,775.00</div>
</div>
</div>
</div>
<h3 style="margin: 2rem 0 1.5rem;">Payment Method</h3>
<div class="payment-options">
<div class="payment-card selected">
<input type="radio" name="paymentMethod" value="stripe" checked style="display: none;">
<div class="payment-icon"><i class="ri-bank-card-line"></i></div>
<div class="payment-title">Credit/Debit Card</div>
<div class="payment-description">Secure payment via Stripe</div>
</div>
<div class="payment-card">
<input type="radio" name="paymentMethod" value="oxapay" style="display: none;">
<div class="payment-icon"><i class="ri-btc-line"></i></div>
<div class="payment-title">Cryptocurrency</div>
<div class="payment-description">Pay with crypto via OxaPay</div>
</div>
</div>
</div>
<div class="step-content" id="step4">
<h3 style="margin-bottom: 1.5rem;">Review Your Task</h3>
<div class="card">
<div class="card-body">
<div style="margin-bottom: 1rem;"><strong>URL:</strong> <span id="reviewUrl"></span></div>
<div style="margin-bottom: 1rem;"><strong>Priority:</strong> <span id="reviewPriority"></span></div>
<div style="margin-bottom: 1rem;"><strong>Keywords:</strong> <span id="reviewKeywords"></span></div>
<div style="margin-bottom: 1rem;"><strong>Budget:</strong> <span id="reviewBudget"></span></div>
</div>
</div>
</div>
</div>
<div class="task-creator-footer">
<div class="footer-info"><i class="ri-shield-check-line"></i> Secure payment processing</div>
<div class="footer-actions">
<button class="btn-ghost" id="prevStepBtn" onclick="prevStep()" style="display: none;">Previous</button>
<button class="btn-primary-gradient" id="nextStepBtn" onclick="nextStep()">Next Step <i class="ri-arrow-right-line"></i></button>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
